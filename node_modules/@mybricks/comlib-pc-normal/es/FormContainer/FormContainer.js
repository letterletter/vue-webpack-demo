import*as e from"react";import*as t from"antd";import*as n from"@ant-design/icons";var o={4988:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",o=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),o&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),o&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,o,l,a){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(o)for(var r=0;r<this.length;r++){var c=this[r][0];null!=c&&(i[c]=!0)}for(var s=0;s<e.length;s++){var u=[].concat(e[s]);o&&i[u[0]]||(void 0!==a&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=a),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),l&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=l):u[4]="".concat(l)),t.push(u))}},t}},8371:e=>{e.exports=function(e){return e[1]}},1615:(e,t,n)=>{n.d(t,{A:()=>r});var o=n(8371),l=n.n(o),a=n(4988),i=n.n(a)()(l());i.push([e.id,".wrapper-f084e {\n  width: 100%;\n}\n.wrapper-f084e .ant-space-item {\n  width: 100%;\n}\n.wrapper-f084e .ant-space-item button {\n  width: 100%;\n}\n.icon-a39bb {\n  display: flex;\n}\n",""]),i.locals={wrapper:"wrapper-f084e",icon:"icon-a39bb"};const r=i},7061:(e,t,n)=>{n.d(t,{A:()=>r});var o=n(8371),l=n.n(o),a=n(4988),i=n.n(a)()(l());i.push([e.id,".collapseButton-ce535 {\n  display: flex;\n  align-items: center;\n  color: var(--ant-primary-color, '#1890ff');\n}\n.collapseButton-ce535 .icon-f9cae {\n  margin-left: 7px;\n}\n.collapseButton-ce535:hover {\n  color: var(--ant-primary-color-hover, '#40a9ff');\n}\n",""]),i.locals={collapseButton:"collapseButton-ce535",icon:"icon-f9cae"};const r=i},5715:(e,t,n)=>{n.d(t,{A:()=>r});var o=n(8371),l=n.n(o),a=n(4988),i=n.n(a)()(l());i.push([e.id,".wrapper-f6b60 .slotInlineWrapper-a2a5e {\n  display: flex;\n  flex-wrap: wrap;\n  width: 100%;\n}\n.wrapper-f6b60 .formItemDesc-f029f {\n  margin-top: 6px;\n  font-size: 12px;\n}\n.wrapper-f6b60 .ant-form-item-label-wrap {\n  overflow: hidden;\n}\n.wrapper-f6b60 .ant-form-inline .ant-form-item > .ant-form-item-control {\n  min-width: 0;\n}\n.wrapper-f6b60 .customLabel-f553f .ant-form-item-label > label {\n  width: 100%;\n}\n.formItemControl-f199e {\n  display: flex;\n}\n.formItemControl-f199e .formItemSlotContent-c6780 {\n  width: 100%;\n  flex: 1;\n}\n.formItemControl-f199e .formItemSlotAfter-d819a {\n  display: flex;\n  align-items: center;\n  margin-left: 12px;\n}\n.formItemControl-f199e .formItemSlotAfter-d819a > div {\n  height: auto !important;\n}\n.empty-ef669 {\n  position: relative;\n  padding-bottom: 68px !important;\n}\n.empty-ef669 div[data-isslot='1'] {\n  overflow: initial;\n}\n.empty-ef669 .emptyHorActions-c09aa {\n  position: absolute;\n  width: 100%;\n  margin-top: 48px;\n}\n.empty-ef669 .emptyVerActions-d3b0c {\n  position: absolute;\n  width: 100%;\n  margin-top: 24px;\n}\n.empty-ef669 .emptyVerActions-d3b0c.onlyone-eff1d {\n  margin-top: 54px;\n}\n.mobileForm-d0f5c .ant-form-item .ant-form-item-label {\n  padding: 0 0 8px;\n  line-height: 1.5715;\n  white-space: normal;\n  text-align: left;\n}\n.mobileForm-d0f5c .ant-form-item .ant-form-item-label > label {\n  margin: 0;\n}\n.mobileForm-d0f5c .ant-form-item .ant-form-item-label > label:after {\n  display: none;\n}\n.mobileForm-d0f5c .ant-form-rtl.ant-form-item .ant-form-item-label {\n  text-align: right;\n}\n.mobileForm-d0f5c .ant-form .ant-form-item {\n  flex-wrap: wrap;\n}\n.mobileForm-d0f5c .ant-form .ant-form-item .ant-form-item-control,\n.mobileForm-d0f5c .ant-form .ant-form-item .ant-form-item-label {\n  flex: 0 0 100%;\n  max-width: 100%;\n}\n.mobileForm-d0f5c .ant-col-xs-24.ant-form-item-label {\n  padding: 0 0 8px;\n  line-height: 1.5715;\n  white-space: normal;\n  text-align: left;\n}\n.mobileForm-d0f5c .ant-col-xs-24.ant-form-item-label > label {\n  margin: 0;\n}\n.mobileForm-d0f5c .ant-col-xs-24.ant-form-item-label > label:after {\n  display: none;\n}\n.mobileForm-d0f5c .ant-form-rtl.ant-col-xs-24.ant-form-item-label {\n  text-align: right;\n}\n",""]),i.locals={wrapper:"wrapper-f6b60",slotInlineWrapper:"slotInlineWrapper-a2a5e",formItemDesc:"formItemDesc-f029f",customLabel:"customLabel-f553f",formItemControl:"formItemControl-f199e",formItemSlotContent:"formItemSlotContent-c6780",formItemSlotAfter:"formItemSlotAfter-d819a",empty:"empty-ef669",emptyHorActions:"emptyHorActions-c09aa",emptyVerActions:"emptyVerActions-d3b0c",onlyone:"onlyone-eff1d",mobileForm:"mobileForm-d0f5c"};const r=i},5072:e=>{var t=[];function n(e){for(var n=-1,o=0;o<t.length;o++)if(t[o].identifier===e){n=o;break}return n}function o(e,o){for(var a={},i=[],r=0;r<e.length;r++){var c=e[r],s=o.base?c[0]+o.base:c[0],u=a[s]||0,d="".concat(s," ").concat(u);a[s]=u+1;var m=n(d),f={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==m)t[m].references++,t[m].updater(f);else{var p=l(f,o);o.byIndex=r,t.splice(r,0,{identifier:d,updater:p,references:1})}i.push(d)}return i}function l(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,l){var a=o(e=e||[],l=l||{});return function(e){e=e||[];for(var i=0;i<a.length;i++){var r=n(a[i]);t[r].references--}for(var c=o(e,l),s=0;s<a.length;s++){var u=n(a[s]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}a=c}}},7659:e=>{var t={};e.exports=function(e,n){var o=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},4868:e=>{e.exports=function(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}},7825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var l=void 0!==n.layer;l&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,l&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(o,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},1113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},l={};function a(e){var t=l[e];if(void 0!==t)return t.exports;var n=l[e]={id:e,exports:{}};return o[e](n,n.exports,a),n.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var i={};(()=>{a.d(i,{A:()=>oe});const o=(l={Fragment:()=>e.Fragment,default:()=>e.default,useCallback:()=>e.useCallback,useLayoutEffect:()=>e.useLayoutEffect,useMemo:()=>e.useMemo,useRef:()=>e.useRef,useState:()=>e.useState},r={},a.d(r,l),r);var l,r;const c=(e=>{var t={};return a.d(t,e),t})({Button:()=>t.Button,Col:()=>t.Col,Form:()=>t.Form,Row:()=>t.Row,Space:()=>t.Space});var s=a(5072),u=a.n(s),d=a(7825),m=a.n(d),f=a(7659),p=a.n(f),v=a(4868),b=a.n(v),y=a(540),E=a.n(y),h=a(1113),I=a.n(h),g=a(5715),S={attributes:{title:"less"}};S.styleTagTransform=I(),S.setAttributes=b(),S.insert=p().bind(null,"head"),S.domAPI=m(),S.insertStyleElement=E(),u()(g.A,S);const A=g.A&&g.A.locals?g.A.locals:void 0;var F=function(){return F=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var l in t=arguments[n])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e},F.apply(this,arguments)},N=function(e){var t=e.com;return e.value,e.onChange,e.field,t.jsx};const _=function(e){var t,n,l,a,i,r=e.com,s=e.item,u=e.data,d=e.slots,m=e.isMobile,f=e.env,p=s.dynamicStyle,v=void 0===p?{}:p,b=(null===(t=u.config)||void 0===t?void 0:t.colon)||u.colon,y="default"===(null==s?void 0:s.colon)?b:s.colon,E=v.labelAlign&&"default"!==v.labelAlign?null==v?void 0:v.labelAlign:void 0,h="default"===(null==s?void 0:s.labelWidthType)?void 0:{flex:"0 0 ".concat(s.labelWidth?s.labelWidth:98,"px")},I=v.labelAutoWrap&&"default"!==v.labelAutoWrap?v.labelAutoWrap?"pre-wrap":"nowrap":void 0;return o.default.createElement(c.Form.Item,{label:(null==s?void 0:s.hiddenLabel)||m&&0===(null===(l=null===(n=null==s?void 0:s.label)||void 0===n?void 0:n.trim())||void 0===l?void 0:l.length)?void 0:s.labelSlot?null===(a=d[s.labelSlot])||void 0===a?void 0:a.render({scope:r.scope}):o.default.createElement("label",{style:F(F({},v.labelStyle),{whiteSpace:I})},f.i18n(null==s?void 0:s.label)),className:s.labelSlot?A.customLabel:void 0,labelCol:h,labelAlign:E,name:null==s?void 0:s.name,required:null==s?void 0:s.required,validateStatus:null==s?void 0:s.validateStatus,help:null==s?void 0:s.help,tooltip:f.i18n(null==s?void 0:s.tooltip),colon:!!(null==s?void 0:s.label)&&y,hidden:null==s?void 0:s.hidden},o.default.createElement("div",{className:A.formItemControl},o.default.createElement("div",{className:A.formItemSlotContent},o.default.createElement(N,{com:r})),s.slotAfter&&o.default.createElement("div",{className:A.formItemSlotAfter},o.default.createElement(c.Form.Item,{noStyle:!0},null===(i=d[s.slotAfter])||void 0===i?void 0:i.render({scope:r.scope})))),s.description&&o.default.createElement("div",{className:"".concat(A.formItemDesc)},o.default.createElement(c.Form.Item,{noStyle:!0},o.default.createElement("span",{className:"formItemDesc",style:v.descriptionStyle},f.i18n(s.description)))))};var w;!function(e){e.FRONT="front",e.BACK="back"}(w||(w={}));const O=n;var C={SET_FIELDS_VALUE:"setFieldsValue",SUBMIT:"submit",RESET_FIELDS:"resetFields",SUBMIT_AND_MERGE:"submitAndMerge",SET_INITIAL_VALUES:"setInitialValues",SET_FORM_ITEMS_PROPS:"setFormItemsProps",SET_DISABLED:"setDisabled",SET_ENABLED:"setEnabled",GET_FIELDS_VALUE:"getFieldsValue",VALIDATE_FIELDS:"validateFields",SET_VALIDATE_INFO:"setValidateInfo",SetDisable:"setDisable",SetEnable:"setEnable",IsEnable:"isEnable",SetHidden:"setHidden",SetShow:"setShow",setValue:"setValue",setInitialValue:"setInitialValue",resetValue:"resetValue",isEditable:"isEditable"},D={ON_FINISH:"onFinish",ON_SUBMIT_ERROR:"onSubmitError",ON_RESET_FINISH:"onResetFinish",ON_CLICK_SUBMIT:"onClickSubmit",ON_CLICK_CANCEL:"onClickCancel",ON_MERGE_FINISH:"onMergeFinish",ON_VALUES_CHANGE:"onValuesChange",RETURN_VALUES:"returnValues",ON_VALIDATE:"onValidate",ON_COLLAPSE:"onCollapse",setValueDone:"setValueDone",setInitialValueDone:"setInitialValueDone",resetValueDone:"resetValueDone",setDisabledDone:"setDisabledDone",setEnabledDone:"setEnabledDone",isEnableDone:"isEnableDone",setColorDone:"setColorDone",setOptionsDone:"setOptionsDone",setValidateInfoDone:"setValidateInfoDone",isEditableDone:"isEditableDone"},x={SET_FIELDS_VALUE:"setFieldsValue",VALIDATE_TRIGGER:"validateTrigger",ON_CHANGE:"onChange"},L={SPAN:"span",PX:"px"},T=a(1615),V={attributes:{title:"less"}};V.styleTagTransform=I(),V.setAttributes=b(),V.insert=p().bind(null,"head"),V.domAPI=m(),V.insertStyleElement=E(),u()(T.A,V);const M=T.A&&T.A.locals?T.A.locals:void 0;var j=function(e,t){var n,o;if(!e)return{type:"none"};if(!t.runtime||!(null==e?void 0:e.id))return{type:"none"};var l=null===(n=null==t?void 0:t.hasPermission(null==e?void 0:e.id))||void 0===n||n;if(!0===l)return{type:"none"};var a=function(){var t,n;return!1===l?{permission:!1,type:null===(t=e.registerData)||void 0===t?void 0:t.noPrivilege,hintLinkUrl:e.hintLink,hintLinkTitle:null===(n=e.registerData)||void 0===n?void 0:n.title}:l}();return a.permission?{type:"none"}:"hide"===a.type?{type:"hide"}:"hintLink"===a.type?{type:"hintLink",hintLinkUrl:a.hintLinkUrl||e.hintLink,hintLinkTitle:a.hintLinkTitle||(null===(o=e.registerData)||void 0===o?void 0:o.title)}:{type:"hide"}},k=function(){return k=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var l in t=arguments[n])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e},k.apply(this,arguments)};const R=function(e){var t=e.env,n=e.data,l=n.actions,a=(n.layout,n.formItemColumn,n.config),i=(0,o.useCallback)((function(e){var t=e.useIcon,n=e.icon,l=e.iconLocation,a=e.iconDistance,i=e.title,r=function(e){var t,n=e.icon,l=O&&(null===(t=O[n])||void 0===t?void 0:t.render());return void 0===l?o.default.createElement("div",{dangerouslySetInnerHTML:{__html:n}}):o.default.createElement(o.default.Fragment,null,l)};return o.default.createElement(c.Space,{size:a},t&&r({icon:n})&&l===w.FRONT?o.default.createElement("span",{className:"icon ".concat(M.icon)},r({icon:n})):null,o.default.createElement("span",null,i),t&&r({icon:n})&&l===w.BACK?o.default.createElement("span",{className:"icon ".concat(M.icon)},r({icon:n})):null)}),[l]);return o.default.createElement(c.Space,{wrap:!0,"data-form-actions":!0,className:e.isMobile?M.wrapper:""},l.items.map((function(n){var l,r;return(null===(l=e.env)||void 0===l?void 0:l.runtime)&&(null===(r=n.permission)||void 0===r?void 0:r.id)&&"none"!==j(n.permission,t).type?null:void 0===n.visible||n.visible?o.default.createElement(c.Button,{"data-form-actions-item":n.key,type:n.type,loading:n.loading,key:n.key,danger:null==n?void 0:n.danger,onClick:function(){return function(t){var n;(null===(n=e.env)||void 0===n?void 0:n.edit)||(t.outputId===D.ON_CLICK_SUBMIT?e.submit(t.outputId):e.outputs[t.outputId]())}(n)},disabled:n.disabled||a.disabled},i(k(k({},n),{title:t.i18n(n.title)}))):null})))},U=function(e){var t=e.children,n=e.actions,l=e.data,a=e.isEmpty,i=l.actions,r=i.align,s=(i.inlinePadding,{textAlign:r});return o.default.createElement("div",{className:A.slotInlineWrapper},t,l.actions.visible&&o.default.createElement(c.Col,{className:"".concat(a?A.emptyHorActions:""," formAction"),flex:1,style:s},o.default.createElement(c.Form.Item,null,n)))},P=function(e){var t=e.children,n=e.actions,l=e.data,a=e.isEmpty,i=e.isMobile,r=l.actions,s=r.widthOption,u=r.width,d=r.span,m=(0,o.useCallback)((function(){return i?1:"px"===s?"0 0 ".concat(u||0,"px"):"flexFull"===s?1:"0 0 ".concat(100*d/24,"%")}),[s,u,d,i]);return o.default.createElement(o.default.Fragment,null,t,l.actions.visible&&o.default.createElement(c.Col,{className:"".concat(a?A.emptyHorActions:""," formAction"),flex:m(),style:{textAlign:l.actions.align}},o.default.createElement(c.Form.Item,{label:i?"":" ",colon:!1},n)))},B=function(e){var t=e.children,n=e.actions,l=e.data,a=e.isEmpty,i=e.isMobile,r=l.actions,s=r.align,u=r.widthOption,d=r.width,m=r.span,f=(r.inlinePadding,{textAlign:s}),p=(0,o.useCallback)((function(){return"px"===u?"0 0 ".concat(d||0,"px"):"flexFull"===u?1:"0 0 ".concat(100*m/24,"%")}),[u,d,m]);return o.default.createElement(o.default.Fragment,null,t,l.actions.visible&&o.default.createElement(c.Col,{className:"".concat(a?1===l.formItemColumn?"".concat(A.emptyVerActions," ").concat(A.onlyone):A.emptyVerActions:""," formAction"),style:f,flex:p()},o.default.createElement(c.Form.Item,{label:i||1===l.formItemColumn?void 0:" ",colon:!1},n)))};var H={OBJECT:"[object Object]",ARRAY:"[object Array]",STRING:"[object String]",NUMBER:"[object Number]",FORMDATA:"[object FormData]",NULL:"[object Null]",UNDEFINED:"[object Undefined]",BOOLEAN:"[object Boolean]",FUNCTION:"[object Function]"};function W(e,t){if(Array.isArray(t)){for(var n=!1,o=0;o<t.length;o++)if(W(e,t[o])){n=!0;break}return n}var l=/^\[.*\]$/.test(t)?t:H[t.toUpperCase()];return Object.prototype.toString.call(e)===l}function G(e){return/^\d+(?:%)$/.test(e)||/^(?:calc)/.test(e)?e:/^\d+(?:vh)$/.test(e)?parseInt(e,10)+"vh":/^\d+(?:vw)$/.test(e)?parseInt(e,10)+"vw":/^\d+(?:px)?$/.test(e)?parseInt(e,10)+"px":void 0}var z=function(e){var t;return"mobile"===(null===(t=null==e?void 0:e.canvas)||void 0===t?void 0:t.type)};function K(e){return e.labelWidthType===L.SPAN?{span:e.labelCol}:{flex:"0 0 ".concat(e.labelWidth?e.labelWidth:98,"px")}}function $(e){return"[object Object]"===Object.prototype.toString.call(e)}var q=function(e,t){var n,o=e.items,l=e.additionalItems;return(n=o.find((function(e){return e.comName?e.comName===t.name:e.id===t.id})))?{item:n,isFormItem:!0}:{item:n=l.find((function(e){return e.comName?e.comName===t.name:e.id===t.id})),isFormItem:!1}},J=a(7061),Q={attributes:{title:"less"}};Q.styleTagTransform=I(),Q.setAttributes=b(),Q.insert=p().bind(null,"head"),Q.domAPI=m(),Q.insertStyleElement=E(),u()(J.A,Q);const X=J.A&&J.A.locals?J.A.locals:void 0,Y=function(e){var t=e.collapsed,n=e.setCollapsed,l=e.outputs,a=(0,o.useMemo)((function(){return t?o.default.createElement(O.DownOutlined,null):o.default.createElement(O.UpOutlined,null)}),[t]);return o.default.createElement(o.default.Fragment,null,o.default.createElement("a",{className:X.collapseButton,onClick:function(){n(!t),l.onCollapse&&l.onCollapse(t)}},o.default.createElement("span",null,t?"展开":"收起"),o.default.createElement("span",{className:X.icon},a)))},Z=function(e){var t,n=e.data,l=e.isEmpty,a=e.isVerticalModel,i=e.comAray,r=e.childrenInputs,s=e.env,u=e.submit,d=e.outputs,m=n.actions,f=(m.align,m.inlinePadding),p=(0,o.useState)(!s.edit&&n.defaultCollapsed),v=p[0],b=p[1],y=n.span||8,E={textAlign:"right",padding:null==f?void 0:f.map(String).map(G).join(" ")},h=!1,I=-1,g=null==i?void 0:i.map((function(e){var t,l=n.items;if(e){var a=q(n,e),u=a.item,d=a.isFormItem;if(!u)return void(l.length===i.length&&console.warn("formItem comId ".concat(e.id," formItem not found")));var m=!1;if(d&&(u.comName?r[e.name]=e.inputs:r[e.id]=e.inputs),void 0!==(null==u?void 0:u.visible)?u.visible="none"!==e.style.display:u.visible=!0,u.visible&&I++,0===I&&(h=24===y),v&&(m=(h||I>=24/y-1)&&!!I),u.hidden=m,s.edit||(null===(t=s.runtime)||void 0===t?void 0:t.debug)||n.submitHiddenFields){var f=e.style.display;return"none"!==f&&(f=(null==u?void 0:u.hidden)?"none":"block"),o.default.createElement(c.Col,{style:{display:f},span:y,key:e.id},e.jsx)}return(null==u?void 0:u.visible)&&o.default.createElement(c.Col,{style:{display:(null==u?void 0:u.hidden)?"none":"block"},key:e.id,span:y},e.jsx)}})),S=(I+1)*y>=24;return o.default.createElement("div",{className:A.slotInlineWrapper},g,n.actions.visible&&o.default.createElement(c.Col,{className:l?a?A.emptyVerActions:A.emptyHorActions:void 0,flex:1,style:E},o.default.createElement(c.Form.Item,{style:{marginRight:0},label:"vertical"===(null===(t=n.config)||void 0===t?void 0:t.layout)?" ":""},o.default.createElement(c.Space,{wrap:!0,"data-form-actions":!0},S&&o.default.createElement(Y,{collapsed:v,setCollapsed:b,outputs:d}),n.actions.items.map((function(e){var t;return(null==s?void 0:s.runtime)&&(null===(t=e.permission)||void 0===t?void 0:t.id)&&"none"!==j(e.permission,s).type?null:void 0===e.visible||e.visible?o.default.createElement(c.Button,{"data-form-actions-item":e.key,key:e.key,type:e.type,loading:e.loading,danger:null==e?void 0:e.danger,disabled:e.disabled||n.config.disabled,onClick:function(){return function(e){(null==s?void 0:s.edit)||(e.outputId===D.ON_CLICK_SUBMIT?u(e.outputId):d[e.outputId]())}(e)}},e.title):null}))))))},ee=function(e){var t,n=e.slots,l=e.data,a=e.childrenInputs,i=e.outputs,r=e.submit,s=e.env,u=l.layoutType,d=(null===(t=l.config)||void 0===t?void 0:t.layout)||l.layout,m=0===n.content.size&&s.edit,f=z(s),p=(0,o.useMemo)((function(){return"inline"===d}),[d]),v=(0,o.useMemo)((function(){return"horizontal"===d}),[d]),b=(0,o.useMemo)((function(){return"vertical"===d}),[d]),y=function(){return o.default.createElement(R,{data:l,env:s,outputs:i,submit:r,isMobile:f})},E=(0,o.useMemo)((function(){return n.content.render({itemWrap:function(e){var t=q(l,e),a=t.item;return t.isFormItem?o.default.createElement(_,{data:l,slots:n,com:e,item:a,isMobile:f,env:s}):o.default.createElement(o.default.Fragment,null,e.jsx)},wrap:function(e){var t=l.items,n=null==e?void 0:e.map((function(n,i){if(n){var r=q(l,n),s=r.item,u=r.isFormItem;if(!s)return void(t.length===e.length&&console.warn("formItem comId ".concat(n.id," formItem not found")));var d=s.widthOption,m=s.span,p=s.width;u&&(s.comName?a[n.name]=n.inputs:a[n.id]=n.inputs),void 0!==(null==s?void 0:s.visible)?s.visible="none"!==n.style.display:s.visible=!0;var v=f?"100%":"px"===d?"".concat(p,"px"):"".concat(100*m/24,"%");return o.default.createElement(c.Col,{style:{display:n.style.display,width:v},key:n.id},n.jsx)}return console.error(n,e),o.default.createElement("div",{key:i},"组件错误")}));return"QueryFilter"===u?o.default.createElement(Z,{env:s,data:l,isEmpty:m,isVerticalModel:b,comAray:e,outputs:i,submit:r,childrenInputs:a}):o.default.createElement(c.Row,{style:{width:"100%"}},p&&o.default.createElement(U,{data:l,isEmpty:m,actions:o.default.createElement(y,null)},n),v&&o.default.createElement(P,{data:l,isEmpty:m,isMobile:f,actions:o.default.createElement(y,null)},n),b&&o.default.createElement(B,{data:l,isEmpty:m,isMobile:f,actions:o.default.createElement(y,null)},n))}})}),[d,n,f,u]);return E};var te=function(){return te=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var l in t=arguments[n])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e},te.apply(this,arguments)},ne=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(o=Object.getOwnPropertySymbols(e);l<o.length;l++)t.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(e,o[l])&&(n[o[l]]=e[o[l]])}return n};function oe(e){var t,n=e.data,l=e.env,a=e.outputs,i=e.inputs,r=e.slots,s=(e._inputs,e.logger),u=e.title,d=(0,o.useRef)({store:{}}),m=c.Form.useForm()[0],f=(z(l),(0,o.useMemo)((function(){return{}}),[l.edit]));(0,o.useLayoutEffect)((function(){var e;l.runtime&&(i[C.SET_FIELDS_VALUE]((function(e,t){v(e,(function(){r.content.inputs[x.SET_FIELDS_VALUE](e),t.setFieldsValueDone(e)}))})),i[C.SET_INITIAL_VALUES]((function(e,t){b(e,(function(){r.content.inputs[x.SET_FIELDS_VALUE](e),t.setInitialValuesDone(e)}))})),i.resetFields((function(e,t){y((function(){t.onResetFinish()}))})),i[C.SUBMIT]((function(e,t){N(t)})),i[C.SUBMIT_AND_MERGE]((function(e,t){$(e)?_(D.ON_MERGE_FINISH,t,e):_(D.ON_MERGE_FINISH,t)})),null===(e=i[C.GET_FIELDS_VALUE])||void 0===e||e.call(i,(function(e,t){F().then((function(e){t[D.RETURN_VALUES](e)}))})),i[C.SET_DISABLED]((function(e,t){n.config.disabled=!0,E(),t.setDisabledDone()})),i[C.SET_ENABLED]((function(e,t){n.config.disabled=!1,h(),t.setEnabledDone()})),i[C.isEditable]((function(e,t){n.isEditable=e,I(e),t.isReadOnlyDone(e)})),i[C.VALIDATE_FIELDS]((function(e,t){"string"==typeof e&&(e=[e]);var o=!1;Array.isArray(e)&&e.forEach((function(e){var t=n.items.find((function(t){return t.name===e}));if(t){o=!0;var l=re(t,f);ae({input:l,model:te({curFormItem:t},d.current.store)})}})),o||(s.warn("".concat(u,"[校验表单项]无效: 请输入合法的字段数组")),console.warn("".concat(u,"[校验表单项]无效: 请输入合法的字段数组"))),t.validateFieldsDone(o)})),r.content._inputs[x.VALIDATE_TRIGGER]((function(e){var t=e.id,o=e.name,l=q(n,{id:t,name:o}),a=l.item,i=l.isFormItem;if(a&&i){var r=re(a,f);ae({input:r,model:te({curFormItem:a},d.current.store)})}})))}),[]),l.runtime&&(i[C.SET_FORM_ITEMS_PROPS]((function(e,t){g(e),t.setFormItemsPropsDone(e)})),r.content._inputs[x.ON_CHANGE]((function(e){var t,o,l=e.id,i=e.name,r=e.value,c=q(n,{id:l,name:i}),s=c.item,u=c.isFormItem;if(s&&u){var m=((t={})[s.name]=r,t);d.current.store=te(te({},d.current.store),m),a[D.ON_VALUES_CHANGE]?null===(o=a[D.ON_VALUES_CHANGE])||void 0===o||o.call(a,{changedValues:te({},m),allValues:te({},d.current.store)}):console.warn("outputId onValuesChange 不存在，请升级至最新版本")}})),(n.actions.items||[]).forEach((function(e){var t,n,o,l,a=e.key;null===(t=i["".concat(C.SetDisable,"_").concat(a)])||void 0===t||t.call(i,(function(){e.disabled=!0})),null===(n=i["".concat(C.SetEnable,"_").concat(a)])||void 0===n||n.call(i,(function(){e.disabled=!1})),null===(o=i["".concat(C.SetShow,"_").concat(a)])||void 0===o||o.call(i,(function(){e.visible=!0})),null===(l=i["".concat(C.SetHidden,"_").concat(a)])||void 0===l||l.call(i,(function(){e.visible=!1}))})));var p=function(e){var t={};return W(e,"object")&&Object.keys(e).length>0&&Object.entries(e).forEach((function(e){var o=e[0],l=e[1];n.items.find((function(e){return e.name===o}))&&(t[o]=l)})),t},v=function(e,t){var o=p(e);if(Object.keys(o).length>0){var l=Object.keys(o).length-1;Object.keys(o).forEach((function(e,a){var i=a===l;ie({childrenInputs:f,formItems:n.items,name:e},"setValue",o,i?t:void 0)}))}else t()},b=function(e,t){try{var o=p(e);if(Object.keys(o).length>0){var l=Object.keys(o).length-1;Object.keys(o).forEach((function(e,a){var i=a===l;ie({childrenInputs:f,formItems:n.items,name:e},"setInitialValue",o,i?t:void 0)}))}else t()}catch(e){t(),console.error(e)}},y=function(e){try{n.items.forEach((function(t,o){var l=o===n.items.length-1,a=re(t,f);null==a||a.resetValue().resetValueDone((function(){t.validateStatus=void 0,t.help=void 0,l&&(null==e||e())}))}))}catch(t){null==e||e()}},E=function(e){n.items.forEach((function(t){if(!e||e.includes(t.name)){var n=re(t,f);(null==n?void 0:n.setDisabled)&&(null==n||n.setDisabled())}}))},h=function(e){n.items.forEach((function(t){if(!e||e.includes(t.name)){var n=re(t,f);(null==n?void 0:n.setEnabled)&&(null==n||n.setEnabled())}}))},I=function(e,t){n.items.forEach((function(n){if(!t||t.includes(n.name)){var o=re(n,f);(null==o?void 0:o.isEditable)&&(null==o||o.isEditable(e))}}))},g=function(e){if(W(e,["Object"])){var t=[],o=[];Object.entries(e).map((function(e){var l=e[0],a=e[1];if(W(a,["Object"])){var i=n.items.findIndex((function(e){return e.name===l}));if(i<0)console.warn("".concat(u,": 设置表单项配置【").concat(l,"】不存在"));else{var r=n.items[i],c=a.labelStyle,s=a.descriptionStyle,d=a.labelAlign,m=a.labelAutoWrap,f=ne(a,["labelStyle","descriptionStyle","labelAlign","labelAutoWrap"]);"boolean"==typeof f.disabled&&(f.disabled?t:o).push(l);var p=te(te(te({},r),f),{dynamicStyle:{labelStyle:c,descriptionStyle:s,labelAlign:d,labelAutoWrap:m}});n.items[i]=p}}else console.warn("".concat(u,": 设置表单项【").concat(l,"】配置不是对象类型"))})),t.length&&E(t),o.length&&h(o)}},S=(0,o.useCallback)((function(){return new Promise((function(e,t){var o=le(n,f);Promise.all(o.map((function(e){var t=re(e,f);return new Promise((function(o,l){!n.submitHiddenFields||n.validateHiddenFields||e.visible?ae({input:t,model:te({curFormItem:e},d.current.store)},o):o({validateStatus:"success"})}))}))).then((function(n){n.forEach((function(e){"success"!==e.validateStatus&&t(e)})),e(!1)})).catch((function(e){return t(e)}))}))}),[]),F=(0,o.useCallback)((function(){return new Promise((function(e,t){var o=le(n,f);Promise.all(o.map((function(e){var t=re(e,f);return new Promise((function(n,o){var l={};null==t||t.getValue().returnValue((function(t,o){l={name:e.name,value:t},n(l)}))}))}))).then((function(t){var n={};t.forEach((function(e){n[e.name]=e.value})),e(te({},n))})).catch((function(e){return t(e)}))}))}),[]),N=function(e){_(D.ON_FINISH,e)},_=function(e,t,o){S().then((function(){F().then((function(l){var i,r,c,s,u,d=te(te({},l),o);(null===(c=null===(r=null===(i=n.domainModel)||void 0===i?void 0:i.entity)||void 0===r?void 0:r.fieldAry)||void 0===c?void 0:c.length)>0&&(null===(s=n.domainModel)||void 0===s?void 0:s.isQuery)&&"domain"===(null===(u=n.domainModel)||void 0===u?void 0:u.type)&&(d={values:te({},d),fieldsRules:te({},n.domainModel.queryFieldRules)}),t?t[e](d):a[e](d)})).catch((function(e){console.log("收集表单项值失败",e)}))})).catch((function(e){e.validateStatus;var n=ne(e,["validateStatus"]);t&&t[D.ON_SUBMIT_ERROR](n),console.log("校验失败",e)}))},w=n.config,O=(w.labelWrap,w.disabled,ne(w,["labelWrap","disabled"]));return o.default.createElement("div",{className:A.wrapper},o.default.createElement(o.Fragment,null,n.isFormItem?o.default.createElement(ee,{env:l,slots:r,data:n,childrenInputs:f}):o.default.createElement(c.Form,te({className:0===r.content.size&&l.edit&&n.actions.visible?A.empty:void 0,form:m,labelCol:"horizontal"===((null===(t=n.config)||void 0===t?void 0:t.layout)||n.layout)?K(n):void 0},O),o.default.createElement(ee,{env:l,slots:r,data:n,childrenInputs:f,outputs:a,submit:_}))))}var le=function(e,t){var n=e.items;return e.items.length!==Object.keys(t).length&&(n=n.filter((function(e){return e.comName?t[e.comName]:t[e.id]}))),e.submitHiddenFields||(n=n.filter((function(e){return e.visible}))),n},ae=function(e,t){var n=e.input,o=e.model,l=null==o?void 0:o.curFormItem;null==n||n.validate(o).returnValidate((function(e){void 0===e.index&&(l.validateStatus=null==e?void 0:e.validateStatus,l.help=null==e?void 0:e.help),t&&t(te(te({},e),{name:l.name}))}))},ie=function(e,t,n,o){var l,a,i,r,c,s=e.childrenInputs,u=e.formItems,d=e.name,m=u.find((function(e){return e.name===d})),f=t+"Done";if(m){var p=re(m,s);p&&($(n[d])?p[t]&&(null===(i=null===(l=null==p?void 0:p[t])||void 0===l?void 0:(a=l.call(p,te({},n[d])))[f])||void 0===i||i.call(a,(function(e){null==o||o()}))):p[t]&&(null===(c=(r=p[t](n[d]))[f])||void 0===c||c.call(r,(function(e){null==o||o()}))))}},re=function(e,t){var n;return n=t[e.id],e.comName&&(n=t[e.comName]),n||console.warn("FormItem Input Not Found, FormItem Name: ".concat(e.name,", 可能存在脏数据 请联系开发人员")),n}})();var r=i.A;export{r as default};