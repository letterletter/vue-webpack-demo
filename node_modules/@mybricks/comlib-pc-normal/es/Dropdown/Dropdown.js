import*as e from"react";import*as t from"antd";import*as n from"@ant-design/icons";var a={d:(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},r={};a.d(r,{A:()=>m});const i=(l={default:()=>e.default,useEffect:()=>e.useEffect,useState:()=>e.useState},u={},a.d(u,l),u);var l,u;const o=(e=>{var t={};return a.d(t,e),t})({Dropdown:()=>t.Dropdown,Empty:()=>t.Empty,Menu:()=>t.Menu,Space:()=>t.Space}),d=n;function c(e,t){void 0===e&&(e="u_"),void 0===t&&(t=6);for(var n="",a=0;a<t;a++)n+="abcdefhijkmnprstwxyz0123456789".charAt(Math.floor(30*Math.random()));return e+n}var s=function(){return s=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},s.apply(this,arguments)};function m(e){var t=e.data,n=e.env,a=(e.style,e.inputs),r=e.outputs,l=e.slots,u=e.id,m=n.edit,f=n.runtime,p=(!f||f.debug,"_itemKey"),y=(0,i.useState)({}),v=y[0],E=y[1];(0,i.useEffect)((function(){n.runtime&&a.setDynamicOptions((function(e,n){if(Array.isArray(e)){var a=e.map((function(e,t){var n,a;return e.value?((n={value:e.value,disabled:!!e.disabled})[p]=c(),n.index=t,n):((a={value:e})[p]=c(),a.index=t,a)}));t.dynamicOptions=a,n.setDynamicOptionsDone(e)}}))}),[]);var h=function(e){t.isDynamic?r.onChange(e):r.onChange({label:e.label,link:e.link,key:e.key})};return(0,i.useEffect)((function(){m&&t.isChildCustom||n.design||m&&t.isDynamic?E({visible:!0}):n.edit?E({visible:!1}):E({})}),[n,t.isChildCustom,t.isDynamic]),i.default.createElement("div",null,i.default.createElement(o.Dropdown,s({overlayClassName:u,overlay:t.isDynamic?function(e){var t=e.data;return n.edit?i.default.createElement(o.Menu,{style:{width:t.width}},i.default.createElement(o.Menu.Item,null,l.item.render())):n.runtime?Array.isArray(t.dynamicOptions)&&t.dynamicOptions.length>0?i.default.createElement(o.Menu,{style:{width:t.width}},t.dynamicOptions&&t.dynamicOptions.map((function(e,t){return i.default.createElement(o.Menu.Item,{"data-menu-item":e[p],disabled:e.disabled,key:t,onClick:function(){return h(e)}},l.item.render({inputValues:{itemData:e.value,index:t},key:e[p]}))}))):i.default.createElement(o.Menu,null,i.default.createElement(o.Menu.Item,null,i.default.createElement(o.Empty,null))):void 0}({data:t}):function(e){var t=e.data;return i.default.createElement(o.Menu,{style:{width:t.width}},t.options&&t.options.map((function(e,t){var a,r=d&&(null===(a=d[e.icon])||void 0===a?void 0:a.render());return i.default.createElement(o.Menu.Item,{"data-menu-item":e.key,disabled:e.disabled,key:t,onClick:function(){return h(e)}},i.default.createElement("a",{target:"_blank",href:e.value?e.value:void 0},i.default.createElement("span",{style:{display:e.useIcon?void 0:"none",marginRight:"8px"}},r),n.i18n(e.label)))})))}({data:t}),placement:t.placement,arrow:!0},v,{getPopupContainer:function(e){return(null==n?void 0:n.canvasElement)||document.body},overlayStyle:{minWidth:t.width},trigger:[t.trigger||"hover"]}),!1===t.isCustom?i.default.createElement("a",{onClick:function(e){return e.preventDefault()}},i.default.createElement(o.Space,null,n.i18n(t.content),i.default.createElement(d.DownOutlined,null))):i.default.createElement("div",null,l.carrier&&l.carrier.render())))}var f=r.A;export{f as default};