/*! For license information please see Calendar.js.LICENSE.txt */
import*as e from"react";import*as t from"moment";import*as n from"antd";var r={4988:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,a,o){"string"==typeof e&&(e=[[null,e,void 0]]);var c={};if(r)for(var i=0;i<this.length;i++){var u=this[i][0];null!=u&&(c[u]=!0)}for(var l=0;l<e.length;l++){var d=[].concat(e[l]);r&&c[d[0]]||(void 0!==o&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=o),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),a&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=a):d[4]="".concat(a)),t.push(d))}},t}},8371:e=>{e.exports=function(e){return e[1]}},578:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(8371),a=n.n(r),o=n(4988),c=n.n(o)()(a());c.push([e.id,".hideModeSwitch-ca333 .ant-picker-calendar-mode-switch {\n  display: none;\n}\n.hideYearSwitch-e8678 .ant-picker-calendar-year-select {\n  display: none;\n}\n.hideMonthSwitch-cd2a6 .ant-picker-calendar-month-select {\n  display: none;\n}\n.calendar-ceb6d .ant-picker-cell-today .ant-picker-calendar-date {\n  border-color: #0075ff !important;\n}\n.calendar-ceb6d .ant-picker-calendar-date-content {\n  display: flex;\n  flex-direction: column;\n}\n",""]),c.locals={hideModeSwitch:"hideModeSwitch-ca333",hideYearSwitch:"hideYearSwitch-e8678",hideMonthSwitch:"hideMonthSwitch-cd2a6",calendar:"calendar-ceb6d"};const i=c},5072:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var o={},c=[],i=0;i<e.length;i++){var u=e[i],l=r.base?u[0]+r.base:u[0],d=o[l]||0,s="".concat(l," ").concat(d);o[l]=d+1;var f=n(s),p={css:u[1],media:u[2],sourceMap:u[3],supports:u[4],layer:u[5]};if(-1!==f)t[f].references++,t[f].updater(p);else{var m=a(p,r);r.byIndex=i,t.splice(i,0,{identifier:s,updater:m,references:1})}c.push(s)}return c}function a(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,a){var o=r(e=e||[],a=a||{});return function(e){e=e||[];for(var c=0;c<o.length;c++){var i=n(o[c]);t[i].references--}for(var u=r(e,a),l=0;l<o.length;l++){var d=n(o[l]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}o=u}}},7659:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},4868:e=>{e.exports=function(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}},7825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,a&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},1113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},7097:(e,t,n)=>{var r;function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}!function(){var o={}.hasOwnProperty;function c(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=u(e,i(n)))}return e}function i(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!==a(e))return"";if(Array.isArray(e))return c.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)o.call(e,n)&&e[n]&&(t=u(t,n));return t}function u(e,t){return t?e?e+" "+t:e+t:e}e.exports?(c.default=c,e.exports=c):"object"===a(n.amdO)&&n.amdO?void 0===(r=function(){return c}.apply(t,[]))||(e.exports=r):window.classNames=c}()}},a={};function o(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={id:e,exports:{}};return r[e](n,n.exports,o),n.exports}o.amdO={},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var c={};(()=>{o.d(c,{A:()=>T});const r=(a={default:()=>e.default,useEffect:()=>e.useEffect,useRef:()=>e.useRef,useState:()=>e.useState},i={},o.d(i,a),i);var a,i;const u=(e=>{var t={};return o.d(t,e),t})({default:()=>t.default});var l=o(7097),d=o.n(l);const s=(e=>{var t={};return o.d(t,e),t})({Badge:()=>n.Badge,Calendar:()=>n.Calendar});var f,p,m,h;!function(e){e.DataSource="dataSource",e.CurrentDate="currentDate",e.CurrentDs="currentDs"}(f||(f={})),function(e){e.ClickDate="clickDate",e.ClickMonth="clickMonth",e.MonthChange="monthChange",e.DateChange="dateChange",e.ModeChange="modeChange"}(p||(p={})),function(e){e.DateCell="dateCell",e.HeaderRender="headerRender"}(m||(m={})),function(e){e.Month="month",e.Year="year",e.Date="date"}(h||(h={}));var v=o(5072),y=o.n(v),M=o(7825),C=o.n(M),S=o(7659),Y=o.n(S),b=o(4868),g=o.n(b),D=o(540),k=o.n(D),w=o(1113),x=o.n(w),A=o(578),E={attributes:{title:"less"}};E.styleTagTransform=x(),E.setAttributes=g(),E.insert=Y().bind(null,"head"),E.domAPI=C(),E.insertStyleElement=k(),y()(A.A,E);const N=A.A&&A.A.locals?A.A.locals:void 0;function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}var j=function(){return j=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},j.apply(this,arguments)},R=function(e,t){return t=t||"YYYY-MM-DD",(e=(0,u.default)(e)).isValid()?e.format(t):(0,u.default)().format(t)};const T=function(e){var t=e.env,n=e.data,a=e.slots,o=e.inputs,c=e.outputs,i=e.logger,l=e.title,v=n||{},y=(v.useCustomHeader,v.useCustomDateCell),M=v.useModeSwitch,C=v.useMonthSelect,S=v.useYearSelect,Y=(0,r.useState)({}),b=Y[0],g=Y[1],D=(0,r.useState)(),k=D[0],w=D[1],x=t.edit&&!0,A=(0,r.useRef)({}),E=function(e){var t;return"mobile"===(null===(t=null==e?void 0:e.canvas)||void 0===t?void 0:t.type)}(t);(0,r.useEffect)((function(){var e;if(t.edit){var n=R(),r=R((0,u.default)(),"YYYY-MM");g(((e={})[r]=["字符串数据",{color:"red",content:"带颜色标签的数据"}],e[n]=["字符串数据",{color:"red",content:"带颜色标签的数据"}],e))}t.runtime&&o[f.DataSource]&&o[f.DataSource]((function(e,t){e&&"object"===O(e)&&(g(e),t.setDataSourceDone(e))})),t.runtime&&o[f.CurrentDate]&&o[f.CurrentDate]((function(e,t){var n,r,a,o=(n=e,r=(0,u.default)(n).isValid(),a=Number(n),r?(0,u.default)(n):isNaN(a)?void 0:(0,u.default)(a));o?P(o):i.warn("".concat(l,": 设置当前日期输入不合法")),w(o||k),t.setCurrentDateDone(e)}))}),[]);var T=function(e,t){return(t=t||h.Date)===h.Date?{mode:n.mode,dataSource:b[R(e)]||[],date:R(e)}:{mode:n.mode,date:R(e),month:R(e,"YYYY-MM"),dataSource:b[R(e,"YYYY-MM")]||[],firstDate:R(e.startOf(h.Month)),lastDate:R(e.endOf(h.Month))}},P=function(e){var t=R(k,"YYYY-MM"),r=R(e,"YYYY-MM");w((0,u.default)(e)),I(e,n.mode),c[p.DateChange]&&c[p.DateChange](T(e)),t!==r&&c[p.MonthChange]&&c[p.MonthChange](T(e,h.Month))},I=function(e,t){if(A.current&&A.current.fn){var n={};e&&(n.value=e),t&&(n.type=t),A.current.fn(j(j({},A.current.props),n))}},F=function(e,t){var n=e||{},a=n.color,o=n.content;return o&&a?r.default.createElement(s.Badge,{color:a,text:o,key:t}):r.default.createElement("div",{key:t},o||e)},H=function(e,n){var o,c,i=b[R(e,n?"YYYY-MM":"YYYY-MM-DD")]||[];return!n&&y&&a[m.DateCell]?t.edit?!0===x?(x=!1,a[m.DateCell].render({inputValues:(o={},o[f.CurrentDate]=R(e),o[f.CurrentDs]=Array.isArray(i)?i:[i],o),key:R(e)})):r.default.createElement("div",{style:{color:"#ddd"}},"自定义内容"):a[m.DateCell].render({inputValues:(c={},c[f.CurrentDate]=R(e),c[f.CurrentDs]=Array.isArray(i)?i:[i],c),key:R(e)}):(Array.isArray(i)?i:[i]).map(F)};return r.default.createElement(s.Calendar,{mode:n.mode,fullscreen:!E,className:d()(N.calendar,!M&&N.hideModeSwitch,!C&&N.hideMonthSwitch,!S&&N.hideYearSwitch),onPanelChange:function(e,t){c[p.ModeChange]&&t!==n.mode&&c[p.ModeChange](j(j({},T(e,t===h.Year?h.Month:h.Date)),{mode:t})),n.mode=t,I(e,t)},dateFullCellRender:function(e){return r.default.createElement("div",{className:"ant-picker-calendar-date",onClick:function(){return function(e){c[p.ClickDate]&&c[p.ClickDate](T(e))}(e)}},r.default.createElement("div",{className:"ant-picker-calendar-date-value"},R(e,"DD")),r.default.createElement("div",{className:"ant-picker-calendar-date-content"},H(e)))},monthFullCellRender:function(e){var t=R(e,"YYYY-MM")===R((0,u.default)(),"YYYY-MM");return r.default.createElement("div",{onClick:function(){return function(e){c[p.ClickMonth]&&c[p.ClickMonth](T(e,h.Month))}(e)},className:d()("ant-picker-cell-inner","ant-picker-calendar-date",t&&"ant-picker-calendar-date-today")},r.default.createElement("div",{className:"ant-picker-calendar-date-value"},R(e,"M月")),r.default.createElement("div",{className:"ant-picker-calendar-date-content"},H(e,!0)))},onChange:P,value:k})}})();var i=c.A;export{i as default};