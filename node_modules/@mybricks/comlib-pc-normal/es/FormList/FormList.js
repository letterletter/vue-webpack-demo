import*as e from"react";import*as t from"antd";import*as n from"@ant-design/icons";var i={9854:(e,t,n)=>{var i=n(9882).Symbol;e.exports=i},2215:(e,t,n)=>{var i=n(9854),o=n(4434),r=n(8801),a=i?i.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?o(e):r(e)}},1887:(e,t,n)=>{var i=n(2773),o=/^\s+/;e.exports=function(e){return e?e.slice(0,i(e)+1).replace(o,""):e}},5827:(e,t,n)=>{function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}var o="object"==(void 0===n.g?"undefined":i(n.g))&&n.g&&n.g.Object===Object&&n.g;e.exports=o},4434:(e,t,n)=>{var i=n(9854),o=Object.prototype,r=o.hasOwnProperty,a=o.toString,l=i?i.toStringTag:void 0;e.exports=function(e){var t=r.call(e,l),n=e[l];try{e[l]=void 0;var i=!0}catch(e){}var o=a.call(e);return i&&(t?e[l]=n:delete e[l]),o}},8801:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},9882:(e,t,n)=>{function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}var o=n(5827),r="object"==("undefined"==typeof self?"undefined":i(self))&&self&&self.Object===Object&&self,a=o||r||Function("return this")();e.exports=a},2773:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},7892:(e,t,n)=>{var i=n(8632),o=n(5107),r=n(7383),a=Math.max,l=Math.min;e.exports=function(e,t,n){var u,c,s,f,d,m,v=0,p=!1,y=!1,b=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function h(t){var n=u,i=c;return u=c=void 0,v=t,f=e.apply(i,n)}function g(e){var n=e-m;return void 0===m||n>=t||n<0||y&&e-v>=s}function A(){var e=o();if(g(e))return S(e);d=setTimeout(A,function(e){var n=t-(e-m);return y?l(n,s-(e-v)):n}(e))}function S(e){return d=void 0,b&&u?h(e):(u=c=void 0,f)}function E(){var e=o(),n=g(e);if(u=arguments,c=this,m=e,n){if(void 0===d)return function(e){return v=e,d=setTimeout(A,t),p?h(e):f}(m);if(y)return clearTimeout(d),d=setTimeout(A,t),h(m)}return void 0===d&&(d=setTimeout(A,t)),f}return t=r(t)||0,i(n)&&(p=!!n.leading,s=(y="maxWait"in n)?a(r(n.maxWait)||0,t):s,b="trailing"in n?!!n.trailing:b),E.cancel=function(){void 0!==d&&clearTimeout(d),v=0,u=m=c=d=void 0},E.flush=function(){return void 0===d?f:S(o())},E}},8632:e=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}e.exports=function(e){var n=t(e);return null!=e&&("object"==n||"function"==n)}},3711:e=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}e.exports=function(e){return null!=e&&"object"==t(e)}},1263:(e,t,n)=>{function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}var o=n(2215),r=n(3711);e.exports=function(e){return"symbol"==i(e)||r(e)&&"[object Symbol]"==o(e)}},5107:(e,t,n)=>{var i=n(9882);e.exports=function(){return i.Date.now()}},7383:(e,t,n)=>{var i=n(1887),o=n(8632),r=n(1263),a=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(r(e))return NaN;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=i(e);var n=l.test(e);return n||u.test(e)?c(e.slice(2),n?2:8):a.test(e)?NaN:+e}},4988:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",i=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),i&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),i&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,i,o,r){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(i)for(var l=0;l<this.length;l++){var u=this[l][0];null!=u&&(a[u]=!0)}for(var c=0;c<e.length;c++){var s=[].concat(e[c]);i&&a[s[0]]||(void 0!==r&&(void 0===s[5]||(s[1]="@layer".concat(s[5].length>0?" ".concat(s[5]):""," {").concat(s[1],"}")),s[5]=r),n&&(s[2]?(s[1]="@media ".concat(s[2]," {").concat(s[1],"}"),s[2]=n):s[2]=n),o&&(s[4]?(s[1]="@supports (".concat(s[4],") {").concat(s[1],"}"),s[4]=o):s[4]="".concat(o)),t.push(s))}},t}},8371:e=>{e.exports=function(e){return e[1]}},5950:(e,t,n)=>{n.d(t,{A:()=>l});var i=n(8371),o=n.n(i),r=n(4988),a=n.n(r)()(o());a.push([e.id,".wrap-b2a59 {\n  padding: 0 10px;\n  cursor: pointer;\n}\n",""]),a.locals={wrap:"wrap-b2a59"};const l=a},310:(e,t,n)=>{n.d(t,{A:()=>l});var i=n(8371),o=n.n(i),r=n(4988),a=n.n(r)()(o());a.push([e.id,".wrapper-bc1a2 .slotInlineWrapper-e0c54 {\n  display: flex;\n  flex-wrap: wrap;\n  width: 100%;\n}\n.wrapper-bc1a2 .formItemDesc-eb1c0 {\n  margin-top: 6px;\n}\n.wrapper-bc1a2 .ant-form-item-label-wrap {\n  overflow: hidden;\n}\n.formItemControl-d93b9 {\n  display: flex;\n}\n.formItemControl-d93b9 .formItemSlotContent-c698a {\n  width: 100%;\n  flex: 1;\n}\n.formItemControl-d93b9 .formItemSlotAfter-bd427 {\n  display: flex;\n  align-items: center;\n  margin-left: 12px;\n}\n.formItemControl-d93b9 .formItemSlotAfter-bd427 > div {\n  height: auto !important;\n}\n.image-f3d88 {\n  width: 14px;\n  height: 14px;\n}\n",""]),a.locals={wrapper:"wrapper-bc1a2",slotInlineWrapper:"slotInlineWrapper-e0c54",formItemDesc:"formItemDesc-eb1c0",formItemControl:"formItemControl-d93b9",formItemSlotContent:"formItemSlotContent-c698a",formItemSlotAfter:"formItemSlotAfter-bd427",image:"image-f3d88"};const l=a},5072:e=>{var t=[];function n(e){for(var n=-1,i=0;i<t.length;i++)if(t[i].identifier===e){n=i;break}return n}function i(e,i){for(var r={},a=[],l=0;l<e.length;l++){var u=e[l],c=i.base?u[0]+i.base:u[0],s=r[c]||0,f="".concat(c," ").concat(s);r[c]=s+1;var d=n(f),m={css:u[1],media:u[2],sourceMap:u[3],supports:u[4],layer:u[5]};if(-1!==d)t[d].references++,t[d].updater(m);else{var v=o(m,i);i.byIndex=l,t.splice(l,0,{identifier:f,updater:v,references:1})}a.push(f)}return a}function o(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var r=i(e=e||[],o=o||{});return function(e){e=e||[];for(var a=0;a<r.length;a++){var l=n(r[a]);t[l].references--}for(var u=i(e,o),c=0;c<r.length;c++){var s=n(r[c]);0===t[s].references&&(t[s].updater(),t.splice(s,1))}r=u}}},7659:e=>{var t={};e.exports=function(e,n){var i=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},4868:e=>{e.exports=function(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}},7825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,o&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var r=n.sourceMap;r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleTagTransform(i,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},1113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},o={};function r(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={id:e,exports:{}};return i[e](n,n.exports,r),n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var a={};(()=>{r.d(a,{A:()=>at});const i=(o={default:()=>e.default,useCallback:()=>e.useCallback,useEffect:()=>e.useEffect,useLayoutEffect:()=>e.useLayoutEffect,useMemo:()=>e.useMemo,useRef:()=>e.useRef},l={},r.d(l,o),l);var o,l;const u=(e=>{var t={};return r.d(t,e),t})({Button:()=>t.Button,Col:()=>t.Col,Form:()=>t.Form,Image:()=>t.Image,Row:()=>t.Row,Space:()=>t.Space,message:()=>t.message});function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}var s={OBJECT:"[object Object]",ARRAY:"[object Array]",STRING:"[object String]",NUMBER:"[object Number]",FORMDATA:"[object FormData]",NULL:"[object Null]",UNDEFINED:"[object Undefined]",BOOLEAN:"[object Boolean]",FUNCTION:"[object Function]"};function f(e,t){if(Array.isArray(t)){for(var n=!1,i=0;i<t.length;i++)if(f(e,t[i])){n=!0;break}return n}var o=/^\[.*\]$/.test(t)?t:s[t.toUpperCase()];return Object.prototype.toString.call(e)===o}function d(e){return/^\d+(?:%)$/.test(e)||/^(?:calc)/.test(e)?e:/^\d+(?:vh)$/.test(e)?parseInt(e,10)+"vh":/^\d+(?:vw)$/.test(e)?parseInt(e,10)+"vw":/^\d+(?:px)?$/.test(e)?parseInt(e,10)+"px":void 0}function m(e,t){if(void 0===t&&(t=[]),null===e||"object"!==c(e))return e;var n=t.filter((function(t){return t.original===e}))[0];if(n)return n.copy;var i=Array.isArray(e)?[]:{};return t.push({original:e,copy:i}),Object.keys(e).forEach((function(n){i[n]=m(e[n],t)})),i}var v,p={FormItems:"formItems"},y={ON_CHANGE:"onChange",CUR_VALUE:"curValue",VALIDATE_TRIGGER:"validateTrigger"},b={AddField:"addField",RemoveField:"removeField"},h={SetValue:"setValue",SetInitialValue:"setInitialValue",ResetValue:"resetValue",SetDisabled:"setDisabled",SetEnabled:"setEnabled",SetValidateInfo:"setValidateInfo",SetColor:"setColor",SetDynamicStyles:"setDynamicStyles"},g={OnChange:"onChange",OnBlur:"onBlur",OnInitial:"onInitial",ReturnValue:"returnValue",OnValidate:"onValidate",SetDynamicStylesDone:"setDynamicStylesDone"};!function(e){e.Small="small",e.Middle="middle",e.Large="large"}(v||(v={}));var A=[{label:"小",value:v.Small},{label:"默认",value:v.Middle},{label:"大",value:v.Large}],S=r(7892),E=r.n(S),I={SET_FIELDS_VALUE:"setFieldsValue",SUBMIT:"submit",RESET_FIELDS:"resetFields",SUBMIT_AND_MERGE:"submitAndMerge",SET_INITIAL_VALUES:"setInitialValues",SET_FORM_ITEMS_PROPS:"setFormItemsProps",SET_DISABLED:"setDisabled",SET_ENABLED:"setEnabled",GET_FIELDS_VALUE:"getFieldsValue",VALIDATE_FIELDS:"validateFields",SET_VALIDATE_INFO:"setValidateInfo",SetDisable:"setDisable",SetEnable:"setEnable",IsEnable:"isEnable",SetHidden:"setHidden",SetShow:"setShow",setValue:"setValue",setInitialValue:"setInitialValue",resetValue:"resetValue",isEditable:"isEditable"},x={ON_FINISH:"onFinish",ON_SUBMIT_ERROR:"onSubmitError",ON_RESET_FINISH:"onResetFinish",ON_CLICK_SUBMIT:"onClickSubmit",ON_CLICK_CANCEL:"onClickCancel",ON_MERGE_FINISH:"onMergeFinish",ON_VALUES_CHANGE:"onValuesChange",RETURN_VALUES:"returnValues",ON_VALIDATE:"onValidate",ON_COLLAPSE:"onCollapse",setValueDone:"setValueDone",setInitialValueDone:"setInitialValueDone",resetValueDone:"resetValueDone",setDisabledDone:"setDisabledDone",setEnabledDone:"setEnabledDone",isEnableDone:"isEnableDone",setColorDone:"setColorDone",setOptionsDone:"setOptionsDone",setValidateInfoDone:"setValidateInfoDone",isEditableDone:"isEditableDone"},k=function(){return k=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},k.apply(this,arguments)},w=function(e,t){var n,i;null===(i=null==e?void 0:(n=e._inputs).validateTrigger)||void 0===i||i.call(n,k({},t))},O=(E()(w,300),function(e,t){var n,i,o=t.id,r=t.name,a=t.value;null===(i=null==e?void 0:(n=e._inputs).onChange)||void 0===i||i.call(n,{id:o,name:r,value:a})}),C=function(){return C=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},C.apply(this,arguments)};function D(e){var t=e.data,n=e.item,i=t;return!0===n.showLabel&&(i=n),"span"===i.labelWidthType?{span:i.labelCol}:{flex:"0 0 ".concat(i.labelWidth?i.labelWidth:25,"px")}}var T=function(e,t){var n,i=e.items,o=e.additionalItems;return(n=i.find((function(e){return e.comName===t.name})))?{item:n,isFormItem:!0}:{item:n=null==o?void 0:o.find((function(e){return e.comName===t.name})),isFormItem:!1}};function V(e){var t=e.data,n=function(e,t){var n=e.data,i=e.com;try{var o=(T(n,i)||{}).item;return null==o?void 0:o[t]}catch(e){console.error(e)}}({data:t,com:e.com},"showLabel");return"boolean"==typeof n?n:t.showLabel}function L(e,t){var n=e.inputs,i=e.index,o=e.item;null==n||n.validate(C({},o)).returnValidate((function(e){o.validateStatus||(o.validateStatus={}),o.help||(o.help={}),o.validateStatus[i]=null==e?void 0:e.validateStatus,o.help[i]=null==e?void 0:e.help,t&&t(C(C({},e),{index:i,subName:o.name}))}))}function N(e){var t=e.data,n=e.childrenStore,i=(e.childId,e.childName),o=e.value;return new Promise((function(e,r){var a={index:-1,name:"",value:o,inputs:{},item:{}};if(Object.keys(n).length){var l=0,u=[];Object.keys(n).forEach((function(o){n[o]&&t.items.forEach((function(r){r.id;var c=r.name,s=r.comName,f=r.label,d=n[o][s],m=d.index,v=d.inputs;d.visible,u[m]||(u[m]={});var p=c||f;null==v||v.getValue().returnValue((function(n){var o,c;u[m][p]=n,l++,s===i&&t.value&&JSON.stringify(null===(o=t.value[m])||void 0===o?void 0:o[p])!==JSON.stringify(n)&&(a.name=p,a.index=m,a.inputs=v,a.item=r),l===(null===(c=t.value)||void 0===c?void 0:c.length)&&e({allValues:u,changedValue:a})}))}))}))}else e({allValues:t.value,changedValue:a})})).then((function(e){var n=e.allValues,i=e.changedValue,o=i.index,r=(i.name,i.value,i.item),a=i.inputs;o<0||(L({item:r,index:o,inputs:a}),t.value=n)})).catch((function(e){console.error("收集值失败，原因："+e)}))}function M(e){var t=e.id,n=e.outputs,i=e.parentSlot,o=e.name,r=e.data,a=r.value;"init"===r.userAction.type?n[g.OnInitial](m(a)):n[g.OnChange](m(a)),O(i,{id:t,value:a,name:o}),function(e){w(e.parentSlot,{id:e.id,name:e.name})}({parentSlot:i,id:t,name:o})}function R(e){var t=e.data,n=e.childrenStore,i=e.id,o=e.name,r=e.outputs,a=e.parentSlot,l=e.logger,u=e.childId,c=e.childName,s=e.value;N({data:t,childrenStore:n,childId:u,childName:c,value:s}).then((function(){M({data:t,id:i,outputs:r,parentSlot:a,name:o})})).catch((function(e){return l.error(e)}))}function j(e){var t=(e.value||[]).length;if(t>0){var n=[];new Array(t).fill(null).map((function(t,i){e.MaxKey=e.MaxKey+1,n.push({name:i,key:e.MaxKey})})),e.fields=n}}function _(e){var t=e.childrenStore,n=e.data,i=n.value,o=(n.items,n.userAction.type);n.userAction.type="",new Promise((function(e,r){var a=function(){n.userAction.key=-1,e(1)};null==i||i.forEach((function(e,r){var l;if(!(n.userAction.startIndex>r)){var u=null===(l=n.fields.find((function(e){return e.name===r})))||void 0===l?void 0:l.key,c=r===i.length-1;F({data:n,childrenStore:t,key:u,value:e,actionType:o},c?a:void 0)}}))})).then((function(e){n.userAction.startIndex=-1})).catch((function(e){return console.error(e)}))}function F(e,t){var n=e.data,i=e.childrenStore,o=e.key,r=e.value,a=e.actionType,l=n.items,u="",c="add"===a?h.SetInitialValue:a,s=c+"Done";[h.SetValue,h.SetInitialValue,h.ResetValue].includes(c)&&n.disabled&&(u=h.SetDisabled);var f=n.items.map((function(e){return e.name}));void 0!==o&&f.forEach((function(e,n){var a,d,v=l.find((function(t){return(t.name||t.label)===e})),p=n===f.length-1;if(v){var y=i[o][v.comName],b=y.inputs;y.index,b[c]&&(null===(d=(a=b[c](m(r[e])))[s])||void 0===d||d.call(a,(function(e){p&&(null==t||t())}))),u&&b[u]&&b[u]()}}))}E()(M,300),E()(N,300);var P=r(5072),U=r.n(P),B=r(7825),W=r.n(B),H=r(7659),G=r.n(H),K=r(4868),z=r.n(K),$=r(540),X=r.n($),q=r(1113),J=r.n(q),Q=r(310),Z={attributes:{title:"less"}};Z.styleTagTransform=J(),Z.setAttributes=z(),Z.insert=G().bind(null,"head"),Z.domAPI=W(),Z.insertStyleElement=X(),U()(Q.A,Z);const Y=Q.A&&Q.A.locals?Q.A.locals:void 0;var ee=function(){return ee=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ee.apply(this,arguments)},te=function(e,t,n){if(n||2===arguments.length)for(var i,o=0,r=t.length;o<r;o++)!i&&o in t||(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return e.concat(i||Array.prototype.slice.call(t))},ne=function(e){return e.com.jsx};const ie=function(e){var t,n,o,r=e.com,a=e.item,l=e.field,c=e.data,s=(e.slots,e.env),f={margin:te([],a.inlineMargin,!0).map(String).map(d).join(" "),flexWrap:"nowrap"},m={colon:"default"===(null==a?void 0:a.colon)?null===(t=c.formItemConfig)||void 0===t?void 0:t.colon:a.colon,labelAlign:"default"===(null==a?void 0:a.labelAlign)?c.formItemConfig.labelAlign:a.labelAlign,labelCol:D({data:c,item:a})},v=V({data:c,com:r});return i.default.createElement(i.default.Fragment,null,i.default.createElement(u.Form.Item,ee({},l,m,{label:v?i.default.createElement("label",{style:ee({},null==a?void 0:a.labelStyle)},s.i18n(null==a?void 0:a.label)):void 0,name:l?[l.name,null==a?void 0:a.name]:null==a?void 0:a.name,required:null==a?void 0:a.required,validateStatus:null===(n=null==a?void 0:a.validateStatus)||void 0===n?void 0:n[l.name],help:null===(o=null==a?void 0:a.help)||void 0===o?void 0:o[l.name],tooltip:s.i18n(null==a?void 0:a.tooltip),style:f}),i.default.createElement(ne,{com:r})),i.default.createElement("div",{className:Y.formItemControl},i.default.createElement("div",{className:Y.formItemSlotContent})),a.description&&i.default.createElement("div",{className:Y.formItemDesc},i.default.createElement(u.Form.Item,{noStyle:!0},i.default.createElement("span",{style:a.descriptionStyle},s.i18n(a.description)))))};var oe=function(){return oe=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},oe.apply(this,arguments)};const re=function(e){var t=e.slots,n=e.data,o=e.env,r=e.actions,a=e.field,l=e.childrenStore,c=e.outputs,s=e.id,f=e.parentSlot,d=(e.logger,e.callbacks),v=(0,i.useMemo)((function(){return t[p.FormItems].render({itemWrap:function(e){var r,l=T(n,e),u=l.item,c=l.isFormItem,s=a.key,f=null===(r=n.fields.find((function(e){return e.key===s})))||void 0===r?void 0:r.name;return a.name=f,c?i.default.createElement(ie,{data:n,slots:t,com:e,item:u,field:a,env:o}):i.default.createElement(i.default.Fragment,null,e.jsx)},wrap:function(t){var v=null==t?void 0:t.length,p=null==t?void 0:t.map((function(e,o){var r;if(e){var c=T(n,e),s=c.item,f=c.isFormItem;if(!s)return;var d="none"!==e.style.display;if(f||v--,a&&f){var m=a.key,p=null===(r=n.fields.find((function(e){return e.key===m})))||void 0===r?void 0:r.name;l[m]||(l[m]={}),l[m][e.name]={inputs:e.inputs,index:p,visible:d}}var y=s.widthOption,b=s.span,h=s.width,g="px"===y?"".concat(h,"px"):"".concat(100*b/24,"%");return i.default.createElement(u.Col,{style:{display:e.style.display,width:g},key:e.id},e.jsx)}return console.error(e,t),i.default.createElement("div",{key:o},"组件错误")}));if(o.runtime&&function(e){var t=e.childrenStore,n=e.comCount;return e.data.fields.every((function(e){var i=e.key;return t[i]&&Object.keys(t[i]).length===n}))}({data:n,childrenStore:l,comCount:v})&&n.userAction.type){var y=n.userAction.type;switch(n.userAction.type){case"add":case"init":if(n.userAction.key!==a.key)return;n.userAction.type="";var b=m(n.userAction.value),h=n.userAction.key;if(Array.isArray(n.value)){var g=n.userAction.index;n.value.splice(g,0,b||{})}else n.value=[b||{}];var A=function(){M({data:n,id:s,outputs:c,parentSlot:f,name:e.name}),n.userAction.index=-1,n.userAction.key=-1,n.userAction.value=void 0,Object.entries(d).forEach((function(e){var t=e[0],n=e[1];"function"==typeof n&&(n(),d[t]=null)}))};b?F({data:n,childrenStore:l,key:h,value:b||{},actionType:y},A):A();break;default:_({data:n,childrenStore:l})}}return i.default.createElement(i.default.Fragment,null,p,o.edit&&r)},inputValues:oe({},a),style:n.slotStyle,key:a.key})}),[n.slotStyle,a.name,a.key]);return i.default.createElement(u.Form,{layout:(null==n?void 0:n.layoutType)||"horizontal"},i.default.createElement(u.Row,{key:a.key,className:"form-list-item"},v,!o.edit&&r))};var ae=function(e,t,n){if(n||2===arguments.length)for(var i,o=0,r=t.length;o<r;o++)!i&&o in t||(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return e.concat(i||Array.prototype.slice.call(t))},le=window.setInterval,ue=window.clearInterval,ce=window.setTimeout,se=window.clearTimeout,fe=window,de=new WeakMap,me=new WeakMap,ve=new WeakMap,pe={undefined:!0,Array:!0,Object:!0,String:!0,Boolean:!0,Math:!0,Number:!0,Symbol:!0,parseFloat:!0,Float32Array:!0};function ye(){var e={};return Object.getOwnPropertyNames(fe).forEach((function(t){var n=Object.getOwnPropertyDescriptor(fe,t);if(n&&!n.configurable){var i=Object.prototype.hasOwnProperty.call(n,"get");"top"!==t&&"parent"!==t&&"self"!==t&&"window"!==t||(n.configurable=!0,i||(n.writable=!0)),Object.defineProperty(e,t,Object.freeze(n))}})),e}var be=function(){function e(e){void 0===e&&(e={});var t=this;this.hasDisposed=!1,this.fakeWindow=ye(),this.timeoutList=[],this.intervalList=[],this.options={},this.options=e||{},this.proxy=new Proxy(window,{set:function(e,n,i){if(!t.hasDisposed)try{!t.fakeWindow.hasOwnProperty(n)&&e.hasOwnProperty(n)&&(o=n,r=t.fakeWindow,(a=Object.getOwnPropertyDescriptor(window,o))&&a.writable&&Object.defineProperty(r,o,{configurable:a.configurable,enumerable:a.enumerable,writable:a.writable,value:a.value})),t.fakeWindow[n]=i}catch(e){throw console.error("set-key-error",n,e),e}var o,r,a;return!0},get:function(e,n){if(n===Symbol.unscopables)return pe;if("window"===n||"self"===n)return t.proxy;if("document"!==n){if("hasOwnProperty"===n)return e.hasOwnProperty;if("eval"===n)return e.eval;if("location"===n)return e.location;try{var i=n in t.fakeWindow?t.fakeWindow[n]:e[n];return"function"!=typeof i||function(e){if(me.has(e))return me.get(e);var t=0===e.name.indexOf("bound ")&&!e.hasOwnProperty("prototype");return me.set(e,t),t}(i)||function(e){if(de.has(e))return de.get(e);var t=e.prototype&&e.prototype.constructor===e&&Object.getOwnPropertyNames(e.prototype).length>1||/^function\b\s[A-Z].*/.test(e.toString())||/^class\b/.test(e.toString());return de.set(e,t),t}(i)?i:(i=Function.prototype.bind.call(i,e),function(e,t){var n=ve.get(t);if(n)return n;var i=Function.prototype.bind.call(t,e);for(var o in t)i[o]=t[o];return t.hasOwnProperty("prototype")&&!i.hasOwnProperty("prototype")&&(i.prototype=t.prototype),ve.set(t,i),i}(window,i))}catch(e){throw console.error("get-key-error",n,e),e}}},has:function(e,n){return!t.options.module||"params"!==n&&"cb"!==n}}),this.proxy.setTimeout=function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];if(t.hasDisposed)return 0;var r=ce.apply(void 0,ae([e,n],i,!1));return t.timeoutList.push(r),r},this.proxy.clearTimeout=function(e){var n=t.timeoutList.indexOf(e);return-1!==n&&t.timeoutList.splice(n,1),se(e)},this.proxy.setInterval=function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];if(t.hasDisposed)return 0;var r=le.apply(void 0,ae([e,n],i,!1));return t.intervalList.push(r),r},this.proxy.clearInterval=function(e){var n=t.intervalList.indexOf(e);return-1!==n&&t.intervalList.splice(n,1),ue(e)},fe.proxy=this.proxy}return e.prototype.compile=function(e){if(this.hasDisposed)throw new Error("sandbox has been destroyed");var t,n=this.options.module;t=n?function(e){return"(\n                function(window, params, cb) {\n                    with(window) {\n                        return (".concat(e,")(...params, cb)\n                    }\n                }\n            )")}(e):function(e){return"(\n                function(window) {\n                    with(window){\n                        ".concat(e,"\n                    } \n                }\n            ).bind(window.proxy)\n        ")}(e);var i=fe.eval("".concat(t,";//@ sourceURL=sandbox-code.js"));return{run:function(e,t){try{return n?i(window.proxy,e,t):i(window.proxy)}catch(e){throw console.error("js sandbox error occur:",e),e}}}},e.prototype.dispose=function(){this.timeoutList.forEach((function(e){window.clearTimeout(e)})),this.timeoutList=[],this.intervalList.forEach((function(e){return ue(e)})),this.intervalList=[],this.fakeWindow=ye(),this.options={},delete fe.proxy,this.hasDisposed=!0,console.log("Sandbox was successfully destroyed")},e}();const he=be;var ge=function(){function e(e){this.options={},String.prototype.matchAll||(String.prototype.matchAll=function(e){for(var t,n=[];null!=(t=e.exec(this));)n.push(t);return n}),this.options=e}return e.prototype.unscopeCompileCode=function(e,t){return void 0===e&&(e="context"),new Function(e,"with(".concat(e,"){\n            return ").concat(t,"\n        }"))},e.prototype.scopeCompileCode=function(e){var t=this,n=this.unscopeCompileCode(this.options.prefix,e);return function(e){var i,o=t.options.prefix?((i={})[t.options.prefix]=e,i):e,r=new Proxy(o,{has:function(e,t){return!0},get:function(e,t,n){if(t!==Symbol.unscopables)return Reflect.get(e,t,n)}});return n(r)}},e.prototype.execute=function(e){var t,n=this.scopeCompileCode(e),i=null!==(t=this.options.context)&&void 0!==t?t:{};return n.call(this,i)},e.prototype.executeWithTemplate=function(e){var t=this,n=e.matchAll(/\{([^\{\}]*?|.+)\}/g),i=Array.from(n);if(!i.length)return e;var o=i.map((function(e){var n=e[0],i=e.input,o=e[1];return o.trim()&&(o=t.execute(o)),{match:n,ret:o,input:i}}));if(1===o.length&&o[0].input===o[0].match)return o[0].ret;var r=o.reduce((function(t,n){var i=n.match,o=n.ret;return i===e&&void 0===o?o:t.replace(i,"string"==typeof o?o:JSON.stringify(o))}),e);try{return JSON.parse(r)}catch(e){return r}},e}();const Ae=ge;function Se(e){return Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Se(e)}var Ee,Ie,xe=function(){return xe=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},xe.apply(this,arguments)},ke=function(e,t,n){if(n||2===arguments.length)for(var i,o=0,r=t.length;o<r;o++)!i&&o in t||(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return e.concat(i||Array.prototype.slice.call(t))};!function(e){e.REQUIRED="required",e.MIN="min",e.MAX="max",e.MIN_LENGTH="minLength",e.MAX_LENGTH="maxLength",e.REG_EXP="regExp",e.CODE_VALIDATOR="codeValidator",e.Email_VALIDATOR="emailValidator",e.PHONE_NUMBER_VALIDATOR="phoneNumberValidator",e.CUSTOM_EVENT="customEvent"}(Ie||(Ie={}));var we=encodeURIComponent("export default async function (value, context) {\n  if (!value && ![0, false].includes(value)) {\n    context.failed(`内容不能为空`);\n  } else {\n    context.successed();\n  }\n}\n"),Oe={key:Ie.REQUIRED,status:!1,visible:!0,title:"必填",message:"内容不能为空"},Ce={key:Ie.REG_EXP,status:!1,visible:!0,title:"正则校验",message:"内容不能为空",regExr:"^(?!(null|undefined|)$).+"},De=[{key:Ie.MIN_LENGTH,status:!1,visible:!0,title:"最小长度校验",message:"内容长度不能小于指定值",limitMinLength:[2]},{key:Ie.MAX_LENGTH,status:!1,visible:!0,title:"最大长度校验",message:"内容长度不能大于指定值",limitMaxLength:[1e3]}],Te=[{key:Ie.MIN,status:!1,visible:!0,title:"最小值校验",message:"不能小于指定值",limitMinValue:[0]},{key:Ie.MAX,status:!1,visible:!0,title:"最大值校验",message:"不能大于指定值",limitMaxValue:[1e4]}],Ve=[{key:Ie.CODE_VALIDATOR,status:!1,visible:!0,title:"代码校验",validateCode:we},{key:Ie.CUSTOM_EVENT,status:!1,visible:!0,title:"自定义校验"}],Le=ke([Oe],Ve,!0),Ne=(ke([Oe,Ce],Ve,!0),ke(ke(ke([Oe],De,!0),[Ce],!1),Ve,!0),ke(ke(ke(ke([Oe],De,!0),Te,!0),[Ce],!1),Ve,!0),(Ee={})[Ie.REQUIRED]=function(e){var t=e.value,n=e.message,i=e.failed,o=e.successed,r=e.env;return t||[0,!1].includes(t)?Array.isArray(t)&&t.length<1?i(r.i18n(n)):o():i(r.i18n(n))},Ee[Ie.MIN]=function(e){var t=e.value,n=e.message,i=e.failed,o=e.successed,r=e.env,a=e.limitMinValue;return f(t,"NUMBER")&&t<a?i(r.i18n(n)):o()},Ee[Ie.MAX]=function(e){var t=e.value,n=e.message,i=e.failed,o=e.successed,r=e.env,a=e.limitMaxValue;return f(t,"NUMBER")&&t>a?i(r.i18n(n)):o()},Ee[Ie.MIN_LENGTH]=function(e){var t=e.value,n=e.message,i=e.failed,o=e.successed,r=e.env,a=e.limitMinLength;return t&&(null==t?void 0:t.toString().length)<a?i(r.i18n(n)):o()},Ee[Ie.MAX_LENGTH]=function(e){var t=e.value,n=e.message,i=e.failed,o=e.successed,r=e.env,a=e.limitMaxLength;return t&&(null==t?void 0:t.toString().length)>a?i(r.i18n(n)):o()},Ee[Ie.REG_EXP]=function(e){var t=e.value,n=e.message,i=e.failed,o=e.successed,r=e.env,a=e.regExr;return new RegExp(a).test(t)?o():i(r.i18n(n))},Ee[Ie.CODE_VALIDATOR]=function(e){return function(e,t,n){var i,o=n||{},r=o.env,a=o.callback,l=void 0===a?function(){}:a,u=(null==r?void 0:r.runtime)&&!(null===(i=null==r?void 0:r.runtime)||void 0===i?void 0:i.debug);"object"===Se(e)&&(e=u&&(null==e?void 0:e.transformCode)||(null==e?void 0:e.code));var c=null;if(t&&t.length){var s=new he({module:!0}),f=decodeURIComponent(e);c=/export\s+default.*async.*function.*\(/g.test(f)?s.compile("".concat(f.replace(/export\s+default.*function.*\(/g,"async function _RT_("))):s.compile("".concat(f.replace(/export\s+default.*function.*\(/g,"function _RT_(")))}else c=(s=new he).compile("".concat(decodeURIComponent(e)));return c.run(t,l)}(e.validateCode,e.args,{env:e.env})},Ee[Ie.Email_VALIDATOR]=function(e){var t=e.value,n=e.message,i=e.failed,o=e.successed,r=e.env,a=new RegExp("^[A-Za-z0-9一-龥]+@[a-zA-Z0-9_-]+(.[a-zA-Z0-9_-]+)+$");return t&&!a.test(t)?i(r.i18n(n)):o()},Ee[Ie.PHONE_NUMBER_VALIDATOR]=function(e){var t=e.value,n=e.message,i=e.failed,o=e.successed,r=e.env,a=new RegExp("^1\\d{10}$");return t&&!a.test(t)?i(r.i18n(n)):o()},Ee);const Me=n;var Re;!function(e){e.FRONT="front",e.BACK="back"}(Re||(Re={}));var je,_e,Fe,Pe,Ue,Be,We,He,Ge,Ke,ze=function(){return ze=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ze.apply(this,arguments)},$e=function(e,t,n){if(n||2===arguments.length)for(var i,o=0,r=t.length;o<r;o++)!i&&o in t||(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return e.concat(i||Array.prototype.slice.call(t))},Xe=function(e,t){var n=e.data,i=t||{},o=i.index,r=void 0===o?-1:o,a=i.value,l=n.fields;n.MaxKey=n.MaxKey+1;var u=r>=0?r:l.length,c={name:u,key:n.MaxKey};if(n.userAction.type="add",n.userAction.value=m(a),n.userAction.index=u,n.userAction.key=n.MaxKey,r<0)n.fields.push(c);else{var s=[];new Array(l.length+1).fill(null).forEach((function(e,t){var n=l[t>u&&t>0?t-1:t];t===u&&(n=c),t>u&&(n.name=n.name+1),s.push(n)})),n.fields=s}},qe=function(e){var t,n=e.data,i=e.id,o=e.outputs,r=e.parentSlot,a=e.field,l=e.childrenStore;null===(t=n.value)||void 0===t||t.splice(a.name,1),n.fields=n.fields.filter((function(e){return e.key!==a.key})).map((function(e,t){return ze(ze({},e),{name:t})})),l[a.key]=void 0,M({data:n,id:i,outputs:o,parentSlot:r,name:e.name})},Je=function(e){var t,n,o=e.data,r=e.env,a=e.field,l=e.outputs,c=e.fieldIndex,s={index:c,key:a.key,value:null===(t=o.value)||void 0===t?void 0:t[c]},f=0===(null===(n=o.fields)||void 0===n?void 0:n.length)||"number"==typeof c&&c===o.fields.length-1,d=o.fields.length;return i.default.createElement(u.Space,{wrap:!0},o.actions.items.map((function(t){var n=t.iconConfig,c=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n}(t,["iconConfig"]),m=Ze(t),v=function(e,t){var n,i;if(!e)return{type:"none"};if(!t.runtime||!(null==e?void 0:e.id))return{type:"none"};var o=null===(n=null==t?void 0:t.hasPermission(null==e?void 0:e.id))||void 0===n||n;if(!0===o)return{type:"none"};var r=function(){var t,n;return!1===o?{permission:!1,type:null===(t=e.registerData)||void 0===t?void 0:t.noPrivilege,hintLinkUrl:e.hintLink,hintLinkTitle:null===(n=e.registerData)||void 0===n?void 0:n.title}:o}();return r.permission?{type:"none"}:"hide"===r.type?{type:"hide"}:"hintLink"===r.type?{type:"hintLink",hintLinkUrl:r.hintLinkUrl||e.hintLink,hintLinkTitle:r.hintLinkTitle||(null===(i=e.registerData)||void 0===i?void 0:i.title)}:{type:"hide"}}(t.permission,r);if(!1===t.visible)return null;if(!r.edit){if("none"!==v.type)return null;var p=function(e,t,n,i){var o=!0;if(e.displayExpression){var r=ze(ze({},t),n),a=new Ae({context:r,prefix:"item"});try{o=a.executeWithTemplate(e.displayExpression)}catch(t){null==i||i("动态表单项[".concat(e.title,"]: ").concat(t))}}return o}(t,s,{isLast:f,listLength:d},e.onError);if(!1===p)return null}return i.default.createElement(u.Button,ze({"data-form-actions-item":t.key},c,{disabled:o.disabled,onClick:function(){return function(t){if(!r.edit){if("add"===t.key)return Xe({data:o}),void(l[t.key]&&l[t.key]({nextIndex:o.fields.length-1,nextKey:o.MaxKey}));l[t.key]&&l[t.key](s),"remove"===t.key&&a&&qe(e)}}(t)}}),i.default.createElement(u.Space,{size:(null==n?void 0:n.gutter)||8},(null==n?void 0:n.location)===Re.FRONT?m:void 0,r.i18n(t.title),(null==n?void 0:n.location)===Re.BACK?m:void 0))})))},Qe=function(e){var t=e.data,n=t.actions,o=n.align,r=n.widthOption,a=n.width,l=n.span,c=n.inlinePadding,s={textAlign:o,padding:$e([],void 0===c?[]:c,!0).map(String).map(d).join(" ")},f=(0,i.useCallback)((function(){return"px"===r?"0 0 ".concat(a||0,"px"):"flexFull"===r?1:"0 0 ".concat(100*l/24,"%")}),[r,a,l]);return t.actions.visible?i.default.createElement(u.Col,{"data-form-actions":!0,flex:f(),style:s},i.default.createElement(u.Form.Item,ze({},{label:"",colon:!1},{style:{margin:0}}),i.default.createElement(Je,ze({},e)))):null},Ze=function(e){var t,n=e.iconConfig||{},o=n.src,r=(n.size,n.gutter,n.innerIcon),a=n.customIcon;return"custom"===o&&a?i.default.createElement(u.Image,{className:Y.image,src:a,preview:!1}):"inner"===o?Me&&i.default.createElement("span",null,null===(t=Me[r||"EditOutlined"])||void 0===t?void 0:t.render()):void 0};!function(e){e.Text="text",e.SlotItem="slotItem",e.Group="group"}(je||(je={})),function(e){e.Left="left",e.Center="center",e.Right="right"}(_e||(_e={})),function(e){e.Left="left",e.Right="right",e.Default=""}(Fe||(Fe={})),function(e){e.Length="length",e.Size="size",e.Date="date",e.Request="request"}(Pe||(Pe={})),function(e){e.Local="local",e.Request="request",e.Multiple="multiple",e.Single="single"}(Ue||(Ue={})),function(e){e.Auto="auto"}(Be||(Be={})),function(e){e.Default="default",e.Middle="middle",e.Small="small"}(We||(We={})),function(e){e.TOP="top",e.BOTTOM="bottom"}(He||(He={})),function(e){e.Radio="radio",e.Checkbox="checkbox"}(Ge||(Ge={})),function(e){e.FixedWidth="fixedWidth",e.Fixed="fixed",e.Auto="auto"}(Ke||(Ke={}));var Ye=r(5950),et={attributes:{title:"less"}};et.styleTagTransform=J(),et.setAttributes=z(),et.insert=G().bind(null,"head"),et.domAPI=W(),et.insertStyleElement=X(),U()(Ye.A,et),Ye.A&&Ye.A.locals&&Ye.A.locals;var tt=function(){return tt=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},tt.apply(this,arguments)},nt=[{title:"尺寸",type:"Select",options:A,value:{get:function(e){var t=e.data,n=e.focusArea;if(n){var i=n.dataset.formActionsItem,o=t.actions.items.find((function(e){return e.key===i}));if(o)return o.size||v.Middle}},set:function(e,t){var n=e.data,i=e.focusArea;if(i){var o=i.dataset.formActionsItem,r=n.actions.items.find((function(e){return e.key===o}));r&&(r.size=t,n.actions=tt({},n.actions))}}}},{title:"风格",type:"Select",options:[{value:"primary",label:"主按钮"},{value:"default",label:"次按钮"},{value:"dashed",label:"虚线按钮"},{value:"link",label:"链接按钮"},{value:"text",label:"文字按钮"}],value:{get:function(e){var t=e.data,n=e.focusArea;if(n){var i=n.dataset.formActionsItem,o=t.actions.items.find((function(e){return e.key===i}));if(o)return(null==o?void 0:o.type)||"default"}},set:function(e,t){var n=e.data,i=e.focusArea;if(i){var o=i.dataset.formActionsItem,r=n.actions.items.find((function(e){return e.key===o}));r&&(r.type=t,n.actions=tt({},n.actions))}}}},{title:"危险按钮",type:"Switch",value:{get:function(e){var t=e.data,n=e.focusArea;if(n){var i=n.dataset.formActionsItem,o=t.actions.items.find((function(e){return e.key===i}));if(o)return null==o?void 0:o.danger}},set:function(e,t){var n=e.data,i=e.focusArea;if(i){var o=i.dataset.formActionsItem,r=n.actions.items.find((function(e){return e.key===o}));r&&(r.danger=t,n.actions=tt({},n.actions))}}}},{title:"图标来源",type:"Radio",options:[{label:"无",value:!1},{label:"内置图标库",value:"inner"},{label:"自定义上传",value:"custom"}],value:{get:function(e){var t,n=e.data,i=e.focusArea;if(i){var o=i.dataset.formActionsItem,r=n.actions.items.find((function(e){return e.key===o}));if(r)return(null===(t=r.iconConfig)||void 0===t?void 0:t.src)||!1}},set:function(e,t){var n=e.data,i=e.focusArea;if(i){var o=i.dataset.formActionsItem,r=n.actions.items.find((function(e){return e.key===o}));r&&(r.iconConfig.src=t)}}}},{title:"图标库",type:"Icon",ifVisible:function(e){var t,n=e.data,i=e.focusArea;if(i){var o=i.dataset.formActionsItem,r=n.actions.items.find((function(e){return e.key===o}));if(r)return"inner"===(null===(t=r.iconConfig)||void 0===t?void 0:t.src)}},value:{get:function(e){var t,n=e.data,i=e.focusArea;if(i){var o=i.dataset.formActionsItem,r=n.actions.items.find((function(e){return e.key===o}));if(r)return(null===(t=r.iconConfig)||void 0===t?void 0:t.innerIcon)||"EditOutlined"}},set:function(e,t){var n=e.data,i=e.focusArea;if(i){var o=i.dataset.formActionsItem,r=n.actions.items.find((function(e){return e.key===o}));r&&(r.iconConfig.innerIcon=t)}}}},{title:"上传",type:"ImageSelector",ifVisible:function(e){var t,n=e.data,i=e.focusArea;if(i){var o=i.dataset.formActionsItem,r=n.actions.items.find((function(e){return e.key===o}));if(r)return"custom"===(null===(t=r.iconConfig)||void 0===t?void 0:t.src)}},value:{get:function(e){var t,n=e.data,i=e.focusArea;if(i){var o=i.dataset.formActionsItem,r=n.actions.items.find((function(e){return e.key===o}));if(r)return null===(t=r.iconConfig)||void 0===t?void 0:t.customIcon}},set:function(e,t){var n=e.data,i=e.focusArea;if(i){var o=i.dataset.formActionsItem,r=n.actions.items.find((function(e){return e.key===o}));r&&(r.iconConfig.customIcon=t)}}}},{title:"间距",type:"Inputnumber",options:[{min:0,max:1e3,width:200}],description:"图标与文字间的距离",ifVisible:function(e){var t,n=e.data,i=e.focusArea;if(i){var o=i.dataset.formActionsItem,r=n.actions.items.find((function(e){return e.key===o}));if(r)return!!(null===(t=r.iconConfig)||void 0===t?void 0:t.src)}},value:{get:function(e){var t,n=e.data,i=e.focusArea;if(i){var o=i.dataset.formActionsItem,r=n.actions.items.find((function(e){return e.key===o}));if(r)return[(null===(t=r.iconConfig)||void 0===t?void 0:t.gutter)||8]}},set:function(e,t){var n=e.data,i=e.focusArea;if(i){var o=i.dataset.formActionsItem,r=n.actions.items.find((function(e){return e.key===o}));r&&(r.iconConfig.gutter=t[0])}}}},{title:"位置",type:"Radio",ifVisible:function(e){var t,n=e.data,i=e.focusArea;if(i){var o=i.dataset.formActionsItem,r=n.actions.items.find((function(e){return e.key===o}));if(r)return!!(null===(t=r.iconConfig)||void 0===t?void 0:t.src)}},options:[{label:"位于文字前",value:Re.FRONT},{label:"位于文字后",value:Re.BACK}],value:{get:function(e){var t,n=e.data,i=e.focusArea;if(i){var o=i.dataset.formActionsItem,r=n.actions.items.find((function(e){return e.key===o}));if(r)return(null===(t=r.iconConfig)||void 0===t?void 0:t.location)||Re.FRONT}},set:function(e,t){var n=e.data,i=e.focusArea;if(i){var o=i.dataset.formActionsItem,r=n.actions.items.find((function(e){return e.key===o}));r&&(r.iconConfig.location=t)}}}}],it=function(e,t,n){if(n||2===arguments.length)for(var i,o=0,r=t.length;o<r;o++)!i&&o in t||(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return e.concat(i||Array.prototype.slice.call(t))},ot=[{key:Ie.REQUIRED,status:!1,visible:!0,title:"必填",message:"请至少添加一项"},{key:Ie.CODE_VALIDATOR,status:!1,visible:!0,title:"代码校验",validateCode:"export default async function (value, context) {\n  if (!value) {\n    // 校验失败\n    context.failed('代码校验失败');\n  } else {\n    // 校验成功\n    context.successed();\n  }\n}        \n    "},{key:Ie.CUSTOM_EVENT,status:!1,visible:!0,title:"自定义校验"}];it(it([],nt,!0),[{items:[{options:["size"],catelog:"默认",target:function(e){var t=e.focusArea,n=e.data;if(t){var i=t.dataset.formActionsItem,o=n.actions.items.find((function(e){return e.key===i}));if(o)return'button[data-form-actions-item="'.concat(o.key,'"]')}}},{title:"内置图标",catelog:"默认",options:[{type:"font",config:{disableTextAlign:!0}}],target:function(e){var t=e.focusArea,n=e.data;if(t){var i=t.dataset.formActionsItem,o=n.actions.items.find((function(e){return e.key===i}));if(o)return'button[data-form-actions-item="'.concat(o.key,'"] .anticon')}}},{title:"自定义图标",catelog:"默认",options:["size"],target:function(e){var t=e.focusArea,n=e.data;if(t){var i=t.dataset.formActionsItem,o=n.actions.items.find((function(e){return e.key===i}));if(o)return'button[data-form-actions-item="'.concat(o.key,'"] .ant-image-img')}}},{title:"按钮样式",catelog:"默认",options:["border",{type:"font",config:{disableTextAlign:!0}},"background"],target:function(e){var t=e.focusArea,n=e.data;if(t){var i=t.dataset.formActionsItem,o=n.actions.items.find((function(e){return e.key===i}));if(o)return'button[data-form-actions-item="'.concat(o.key,'"]')}}},{title:"按钮样式",catelog:"Hover",options:["border",{type:"font",config:{disableTextAlign:!0}},"background"],target:function(e){var t=e.focusArea,n=e.data;if(t){var i=t.dataset.formActionsItem,o=n.actions.items.find((function(e){return e.key===i}));if(o)return'button[data-form-actions-item="'.concat(o.key,'"]:hover')}}},{title:"内置图标",catelog:"Hover",options:[{type:"font",config:{disableTextAlign:!0}}],target:function(e){var t=e.focusArea,n=e.data;if(t){var i=t.dataset.formActionsItem,o=n.actions.items.find((function(e){return e.key===i}));if(o)return'button[data-form-actions-item="'.concat(o.key,'"]:hover .anticon')}}},{title:"自定义图标",catelog:"Hover",options:["size"],target:function(e){var t=e.focusArea,n=e.data;if(t){var i=t.dataset.formActionsItem,o=n.actions.items.find((function(e){return e.key===i}));if(o)return'button[data-form-actions-item="'.concat(o.key,'"]:hover .ant-image-img')}}},{title:"按钮样式",catelog:"激活",options:["border",{type:"font",config:{disableTextAlign:!0}},"background"],target:function(e){var t=e.focusArea,n=e.data;if(t){var i=t.dataset.formActionsItem,o=n.actions.items.find((function(e){return e.key===i}));if(o)return'button[data-form-actions-item="'.concat(o.key,'"]:active')}}},{title:"内置图标",catelog:"激活",options:[{type:"font",config:{disableTextAlign:!0}}],target:function(e){var t=e.focusArea,n=e.data;if(t){var i=t.dataset.formActionsItem,o=n.actions.items.find((function(e){return e.key===i}));if(o)return'button[data-form-actions-item="'.concat(o.key,'"]:active .anticon')}}},{title:"自定义图标",catelog:"激活",options:[{type:"font",config:{disableTextAlign:!0}}],target:function(e){var t=e.focusArea,n=e.data;if(t){var i=t.dataset.formActionsItem,o=n.actions.items.find((function(e){return e.key===i}));if(o)return'button[data-form-actions-item="'.concat(o.key,'"]:active .ant-image-img')}}},{title:"按钮样式",catelog:"禁用",options:["border",{type:"font",config:{disableTextAlign:!0}},"background"],target:function(e){var t=e.focusArea,n=e.data;if(t){var i=t.dataset.formActionsItem,o=n.actions.items.find((function(e){return e.key===i}));if(o)return'button[data-form-actions-item="'.concat(o.key,'"].ant-btn[disabled]')}}},{title:"内置图标",catelog:"禁用",options:[{type:"font",config:{disableTextAlign:!0}}],target:function(e){var t=e.focusArea,n=e.data;if(t){var i=t.dataset.formActionsItem,o=n.actions.items.find((function(e){return e.key===i}));if(o)return'button[data-form-actions-item="'.concat(o.key,'"].ant-btn[disabled] .anticon')}}},{title:"自定义图标",catelog:"激活",options:[{type:"font",config:{disableTextAlign:!0}}],target:function(e){var t=e.focusArea,n=e.data;if(t){var i=t.dataset.formActionsItem,o=n.actions.items.find((function(e){return e.key===i}));if(o)return'button[data-form-actions-item="'.concat(o.key,'"].ant-btn[disabled] .ant-image-img')}}}]}],!1);var rt=function(){return rt=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},rt.apply(this,arguments)};function at(e){var t=e.env,n=e.data,o=e.inputs,r=e.outputs,a=e.slots,l=e.logger,u=e.title,c=e.parentSlot,s=e.id,d=(0,i.useRef)(null),v=(0,i.useRef)({}),A=(0,i.useMemo)((function(){return{}}),[t.edit]),S=(0,i.useCallback)((function(){n.value=[],n.fields=[],n.MaxKey=-1,Object.keys(A).forEach((function(e){Reflect.deleteProperty(A,e)}))}),[]);(0,i.useLayoutEffect)((function(){var i,a;n.userAction={type:"",index:-1,key:-2,value:void 0,startIndex:-1},o[h.SetValue]((function(t,i){var o;f(t,["Array","Undefined","NULL"])?(S(),n.value=t,n.userAction.type=h.SetValue,n.userAction.key=-2,O(c,{id:s,value:t,name:e.name}),M({data:n,id:s,outputs:r,parentSlot:c,name:e.name}),j(n)):l.error(u+"[设置值]: 类型不合法"),i.setValueDone&&(null===(o=i.setValueDone)||void 0===o||o.call(i,t))})),o[h.SetInitialValue]((function(t,i){var o;f(t,["Array","Undefined","NULL"])?(S(),n.value=t,n.userAction.type=h.SetInitialValue,n.userAction.key=-2,r[g.OnInitial](m(t)),O(c,{id:s,value:t,name:e.name}),j(n)):l.error(u+"[设置初始值]: 类型不合法"),i.setInitialValueDone&&(null===(o=i.setInitialValueDone)||void 0===o||o.call(i,t))})),o.getValue((function(e,t){var n=k();t.returnValue(n)})),o.resetValue((function(t,n){S(),O(c,{id:s,value:[],name:e.name}),n.resetValueDone()})),o.setDisabled((function(e,t){n.disabled=!0,n.userAction.type=h.SetDisabled,_({data:n,childrenStore:A}),t.setDisabledDone&&t.setDisabledDone()})),o.setEnabled((function(e,t){n.disabled=!1,n.userAction.type=h.SetEnabled,_({data:n,childrenStore:A}),t.setEnabledDone&&t.setEnabledDone()}),[]),o.isEnable((function(e,t){!0===e?(n.disabled=!1,n.userAction.type=h.SetEnabled,_({data:n,childrenStore:A}),t.isEnableDone&&t.isEnableDone(e)):(n.disabled=!0,n.userAction.type=h.SetDisabled,_({data:n,childrenStore:A}),t.isEnableDone&&t.isEnableDone(e))})),o.validate((function(e,i){E().then((function(){(function(e){var t=e.value,n=e.model,i=e.env,o=(e.rules||Le).filter((function(e){return e.status&&e.key!==Ie.CUSTOM_EVENT}));return new Promise((function(e,r){Promise.all(o.map((function(e){return new Promise((function(o,r){var a={successed:function(){return o("success")},failed:function(e){return r(e)}};Ne[e.key](xe({value:t,env:i,args:[t,xe({model:n},a)],validateCode:e.validateCode,message:e.message,regExr:null==e?void 0:e.regExr,limitMinLength:(null==e?void 0:e.limitMinLength)&&(null==e?void 0:e.limitMinLength[0]),limitMaxLength:(null==e?void 0:e.limitMaxLength)&&(null==e?void 0:e.limitMaxLength[0]),limitMinValue:(null==e?void 0:e.limitMinValue)&&(null==e?void 0:e.limitMinValue[0]),limitMaxValue:(null==e?void 0:e.limitMaxValue)&&(null==e?void 0:e.limitMaxValue[0])},a))}))}))).then((function(t){e({validateStatus:"success"})})).catch((function(e){r({validateStatus:"error",help:e})}))}))})({value:n.value,env:t,model:e,rules:n.rules}).then((function(e){var t=(n.rules||ot).find((function(e){return e.key===Ie.CUSTOM_EVENT}));(null==t?void 0:t.status)?(d.current=i.returnValidate,r[x.ON_VALIDATE](n.value)):i.returnValidate(e)})).catch((function(e){i.returnValidate(e)}))})).catch((function(e){i.returnValidate(e),console.log("校验失败",e)}))})),o[I.SET_VALIDATE_INFO]((function(e,t){d.current&&(d.current(e),t.setValidateInfoDone(e))})),null===(i=o[b.AddField])||void 0===i||i.call(o,(function(e,t){Xe({data:n},e),v.current.addFieldDone=function(){return t.addFieldDone(e)}})),null===(a=o[b.RemoveField])||void 0===a||a.call(o,(function(t,i){var o;if(n.fields.length){var r=(t||{}).index,a=null==t?void 0:t.key,l="number"==typeof r?r:n.fields.length-1;a||(a=null===(o=n.fields[l])||void 0===o?void 0:o.key);var u={name:l,key:a};qe(rt(rt({},e),{childrenStore:A,field:u,fieldIndex:l})),i.removeFieldDone(t)}}))}),[]),(0,i.useEffect)((function(){t.runtime&&a[p.FormItems]._inputs[y.ON_CHANGE]((function(t){var i=t.id,o=t.name,r=t.value;!n.userAction.type&&-1===n.userAction.key&&R(rt(rt({},e),{childrenStore:A,childId:i,childName:o,value:r}))}))}),[]);var E=(0,i.useCallback)((function(){return new Promise((function(e,t){var i=[];n.fields.forEach((function(e){e.name;var t=e.key,o=A[t],r=n.items.map((function(e){var t=o[e.comName],i=t.index,r=t.inputs,a=t.visible;return n.submitHiddenFields||a?new Promise((function(t,n){L({item:e,index:i,inputs:r},t)})):{validateStatus:"success"}}));i.push.apply(i,r)})),Promise.all(i).then((function(n){n.forEach((function(e){"success"!==e.validateStatus&&t(e)})),e(!1)})).catch((function(e){return t(e)}))}))}),[]),k=(0,i.useCallback)((function(){var e=[];return n.fields.forEach((function(t){var i=t.name,o=t.key;e[i]||(e[i]={});var r=A[o];n.items.map((function(t){var o,a,l=r[t.comName].visible;(n.submitHiddenFields||l)&&(e[i][t.name]=null===(a=null===(o=n.value)||void 0===o?void 0:o[i])||void 0===a?void 0:a[t.name])}))})),e}),[]),w=(0,i.useMemo)((function(){return{name:0,key:0}}),[]);if(t.edit)return i.default.createElement(i.default.Fragment,null,i.default.createElement(re,rt({},e,{childrenStore:A,actions:i.default.createElement(Qe,rt({},e,{field:w,fieldIndex:0})),field:w})));var C=rt(rt({},e),{field:w,fieldIndex:0,hiddenRemoveButton:!0});return i.default.createElement(i.default.Fragment,null,n.fields.map((function(t){t.key;var o,r=t.name,a=rt(rt({},e),{fieldIndex:r,field:t,childrenStore:A}),l=i.default.createElement(Qe,rt({},a));return i.default.createElement("div",{key:t.key,style:{margin:null===(o=n.listItemMargin)||void 0===o?void 0:o.map((function(e){return e+"px"})).join(" ")}},i.default.createElement(re,rt({},e,{childrenStore:A,actions:l,field:t,callbacks:v.current})))})),0===n.fields.length&&i.default.createElement(Qe,rt({},C)))}})();var l=a.A;export{l as default};