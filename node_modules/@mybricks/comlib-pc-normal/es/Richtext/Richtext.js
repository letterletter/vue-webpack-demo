import*as t from"react";import*as e from"antd";var n={4988:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",o=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),o&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),o&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,o,r,i){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(o)for(var c=0;c<this.length;c++){var l=this[c][0];null!=l&&(a[l]=!0)}for(var u=0;u<t.length;u++){var d=[].concat(t[u]);o&&a[d[0]]||(void 0!==i&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=i),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),r&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=r):d[4]="".concat(r)),e.push(d))}},e}},8371:t=>{t.exports=function(t){return t[1]}},3899:(t,e,n)=>{n.d(e,{A:()=>c});var o=n(8371),r=n.n(o),i=n(4988),a=n.n(i)()(r());a.push([t.id,".editor-rich-text-f11d7 .ant-spin-dot-item {\n  background-color: #FA6400;\n}\n.editor-rich-text-f11d7 .ant-spin-text {\n  color: #FA6400;\n}\n.editor-rich-text__readonly-e520a .tox-tinymce {\n  border: none;\n}\n.editor-rich-text__button-f0053 {\n  cursor: pointer;\n  display: block;\n  width: 100%;\n  text-align: center;\n  border: none;\n  height: 24px;\n  line-height: 24px;\n  border-radius: 3px;\n  background-color: #ffffff;\n  box-shadow: 0 1px 3px -1px #777;\n  margin-top: 8px;\n}\n.editor-rich-text__modal-bb7ca {\n  position: relative;\n  height: 200px;\n}\n.editor-rich-text__modal-text-d5391 {\n  width: 100%;\n  height: 200px;\n  position: relative;\n  z-index: 1;\n  opacity: 0.1;\n  margin-top: 8px;\n}\n.editor-rich-text__modal-placeholder-cfa6d {\n  width: 100%;\n  height: 200px;\n  position: absolute;\n  top: 8px;\n  border: 1px dashed #d0c7c7;\n}\n.editor-rich-text__modal-placeholder-text-afcb1 {\n  height: 200px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: rgba(0, 0, 0, 0.5);\n}\n.editor-rich-text__modal-placeholder-img-c4c0e {\n  height: 198px;\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: contain;\n}\n.editor-rich-text__modalbtn-c6b6f {\n  cursor: pointer;\n  display: block;\n  width: 100px;\n  margin-bottom: 12px;\n  text-align: center;\n  border: none;\n  height: 24px;\n  line-height: 24px;\n  border-radius: 3px;\n  background-color: #ffffff;\n  box-shadow: 0 1px 3px -1px #777;\n  color: rgba(0, 0, 0, 0.85);\n}\n.editor-rich-text__footBtn-ac45b {\n  position: relative;\n  height: 25px;\n}\n.editor-rich-text__footBtn-determine-dd68b {\n  position: absolute;\n  right: 8px;\n}\n.customModal-df3a4 {\n  max-width: 100%;\n  padding: 0px;\n  height: 100vh;\n}\n.customModal-df3a4 .ant-modal-content {\n  height: 100%;\n}\n.customModal-df3a4 .ant-modal-content .ant-modal-body {\n  height: calc(100% - 55px);\n}\n",""]),a.locals={"editor-rich-text":"editor-rich-text-f11d7","editor-rich-text__readonly":"editor-rich-text__readonly-e520a","editor-rich-text__button":"editor-rich-text__button-f0053","editor-rich-text__modal":"editor-rich-text__modal-bb7ca","editor-rich-text__modal-text":"editor-rich-text__modal-text-d5391","editor-rich-text__modal-placeholder":"editor-rich-text__modal-placeholder-cfa6d","editor-rich-text__modal-placeholder-text":"editor-rich-text__modal-placeholder-text-afcb1","editor-rich-text__modal-placeholder-img":"editor-rich-text__modal-placeholder-img-c4c0e","editor-rich-text__modalbtn":"editor-rich-text__modalbtn-c6b6f","editor-rich-text__footBtn":"editor-rich-text__footBtn-ac45b","editor-rich-text__footBtn-determine":"editor-rich-text__footBtn-determine-dd68b",customModal:"customModal-df3a4"};const c=a},5072:t=>{var e=[];function n(t){for(var n=-1,o=0;o<e.length;o++)if(e[o].identifier===t){n=o;break}return n}function o(t,o){for(var i={},a=[],c=0;c<t.length;c++){var l=t[c],u=o.base?l[0]+o.base:l[0],d=i[u]||0,s="".concat(u," ").concat(d);i[u]=d+1;var f=n(s),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==f)e[f].references++,e[f].updater(p);else{var h=r(p,o);o.byIndex=c,e.splice(c,0,{identifier:s,updater:h,references:1})}a.push(s)}return a}function r(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,r){var i=o(t=t||[],r=r||{});return function(t){t=t||[];for(var a=0;a<i.length;a++){var c=n(i[a]);e[c].references--}for(var l=o(t,r),u=0;u<i.length;u++){var d=n(i[u]);0===e[d].references&&(e[d].updater(),e.splice(d,1))}i=l}}},7659:t=>{var e={};t.exports=function(t,n){var o=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},4868:t=>{t.exports=function(t,e){Object.keys(e).forEach((function(n){t.setAttribute(n,e[n])}))}},7825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,r&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(o,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},1113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},o={};function r(t){var e=o[t];if(void 0!==e)return e.exports;var i=o[t]={id:t,exports:{}};return n[t](i,i.exports,r),i.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var i={};(()=>{r.d(i,{A:()=>L});const n=(o={default:()=>t.default,useCallback:()=>t.useCallback,useEffect:()=>t.useEffect,useMemo:()=>t.useMemo,useRef:()=>t.useRef,useState:()=>t.useState},a={},r.d(a,o),a);var o,a;const c=(t=>{var e={};return r.d(e,t),e})({Input:()=>e.Input,Modal:()=>e.Modal,Spin:()=>e.Spin});var l=r(5072),u=r.n(l),d=r(7825),s=r.n(d),f=r(7659),p=r.n(f),h=r(4868),m=r.n(h),v=r(540),g=r.n(v),x=r(1113),_=r.n(x),b=r(3899),y={attributes:{title:"less"}};y.styleTagTransform=_(),y.setAttributes=m(),y.insert=p().bind(null,"head"),y.domAPI=s(),y.insertStyleElement=g(),u()(b.A,y);const w=b.A&&b.A.locals?b.A.locals:void 0;var M={color:"rgba(0,0,0,.25)",background:"#f5f5f5",borderColor:"#d9d9d9",cursor:"not-allowed"},k=function(t){switch(t){case"image":return"image/*";case"video":return"video/*"}},E=function(t){var e=t.type,o=t.url;switch(e){case"image":return n.default.createElement("div",{className:w["editor-rich-text__modal-placeholder-img"],style:{backgroundImage:"url(".concat(o,")")}});case"video":return n.default.createElement("div",null,n.default.createElement("video",{controls:!0,width:"100%",height:200,src:o}))}};function C(t){var e,o,r=t.onOk,i=t.onChange,a=t.visible,l=t.onClose,u=t.uploadModel,d=(0,n.useRef)(null),s=(0,n.useState)(!1),f=s[0],p=s[1],h=(0,n.useRef)(null);return n.default.createElement("div",{ref:d},n.default.createElement("input",{style:{display:"none"},type:"file",accept:k(u.type),ref:h,className:w["editor-upload__input"],onChange:function(t){t.target&&t.target.files&&t.target.files[0]&&p(!0)}}),n.default.createElement(c.Modal,{title:u.title,visible:a,width:520,bodyStyle:{padding:"8px 24px"},maskClosable:!1,footer:[n.default.createElement("div",{className:w["editor-rich-text__footBtn"],key:"button"},n.default.createElement("div",{className:"".concat(w["editor-rich-text__modalbtn"]," ").concat(w["editor-rich-text__footBtn-determine"]),style:(null===(e=u.url)||void 0===e?void 0:e.length)?{}:M,onClick:r},"确定"))],onCancel:l,getContainer:function(){return d.current},zIndex:1002},n.default.createElement("div",{className:w["editor-rich-text__modalbtn"],onClick:function(){var t;null===(t=h.current)||void 0===t||t.click()}},"文件选择"),n.default.createElement(c.Input,{value:u.url,placeholder:"文件地址",onChange:function(t){i({url:t.target.value})}}),n.default.createElement("div",{className:w["editor-rich-text__modal"]},u.url?null:n.default.createElement("textarea",{onPaste:function(t){},className:w["editor-rich-text__modal-text"],ref:function(t){a?null==t||t.focus():t&&function(t){t.value=""}(t)}}),n.default.createElement("div",{className:w["editor-rich-text__modal-placeholder"]},n.default.createElement(c.Spin,{spinning:!0===f},(null===(o=u.url)||void 0===o?void 0:o.length)?E(u):n.default.createElement("div",{className:w["editor-rich-text__modal-placeholder-text"]},n.default.createElement("div",null,"可直接粘贴文件")))))))}function S(t){return window[t]}function A(t,e){void 0===t&&(t="u_"),void 0===e&&(e=6);for(var n="",o=0;o<e;o++)n+="abcdefhijkmnprstwxyz0123456789".charAt(Math.floor(30*Math.random()));return t+n}window._fz_pkg_state_=window._fz_pkg_state_||{},window._fz_pkg_plist_=window._fz_pkg_plist_||{};var I=window._fz_pkg_state_,z=window._fz_pkg_plist_;var B=function(){return B=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},B.apply(this,arguments)},j=function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function c(t){try{l(o.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}l((o=o.apply(t,e||[])).next())}))},N=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&c[0]?o.return:c[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,c[1])).done)return r;switch(o=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,o=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((r=(r=a.trys).length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){a.label=c[1];break}if(6===c[0]&&a.label<r[1]){a.label=r[1],r=c;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(c);break}r[2]&&a.ops.pop(),a.trys.pop();continue}c=e.call(t,a)}catch(t){c=[6,t],o=0}finally{n=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}},T="_pcEditor_customIcons_"+A(),O=(A(),"https://f2.eckwai.com/udata/pkg/eshop/fangzhou/pub/pkg/tinymce/5.7.1/tinymce.min.js");function V(t){var e=this,o=t.data,r=t.outputs,i=t.inputs,a=t.env,l=t.readonly,u=(0,n.useMemo)((function(){return"_pceditor_tinymce_"+A()}),[]),d=(0,n.useMemo)((function(){return"_pceditor_tinymceFS_"+A()}),[]),s=(0,n.useRef)(""),f=(0,n.useRef)(),p=(0,n.useState)(!1),h=p[0],m=p[1],v=(0,n.useState)(!1),g=v[0],x=v[1],_=(0,n.useState)(!0),b=_[0],y=_[1],M=(0,n.useState)({title:"上传图片",type:"image",url:""}),k=M[0],E=M[1];i.submit((function(){r.submit(s.current)}));var V=(0,n.useRef)(null),L=(0,n.useCallback)((function(){return j(e,void 0,void 0,(function(){var t;return N(this,(function(e){switch(e.label){case 0:return[4,(n=O,r="tinyMCE",I[n]||(I[n]={}),z[n]||(z[n]=new Promise((function(t){return I[n].resolve=t}))),new Promise((function(t){if(window[r])return t(window[r]);if(function(t,e){void 0===e&&(e=document);for(var n=!1,o=e.getElementsByTagName("script"),r=0;r<o.length;r++)o[r].src===t&&(n=!0);return n}(n))return z[n].then((function(e){t(e)}));var e=document.createElement("script");e.type="text/javascript",e.src=n,e.onload=function(){I[n].resolve(window[r]),t(window[r])},document.head.appendChild(e)})))];case 1:return e.sent(),function(){var t=S("tinyMCE");if(t){var e=t.IconManager;e.has(T)||e.add(T,{icons:{customvideo:'<svg t="1651135949047" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2273" width="24" height="24"><path d="M912 302.3L784 376V224c0-35.3-28.7-64-64-64H128c-35.3 0-64 28.7-64 64v576c0 35.3 28.7 64 64 64h592c35.3 0 64-28.7 64-64V648l128 73.7c21.3 12.3 48-3.1 48-27.6V330c0-24.6-26.7-40-48-27.7zM712 792H136V232h576v560z m176-167l-104-59.8V458.9L888 399v226z" p-id="2274"></path><path d="M208 360h112c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H208c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z" p-id="2275"></path></svg>',fullscreenexit:'<svg t="1626167157970" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="85763" width="20" height="20"><path d="M400.595 345.365l-0.948-245.022c-0.42-18.881-16.018-30.215-34.956-30.637h-25.406c-18.88-0.42-33.874 16.018-33.457 34.881l1.061 133.251L138.772 72.417c-18.274-18.311-47.844-18.311-66.119 0-18.218 18.314-18.218 47.907 0 66.236l166.575 164.885-127.697 0.512c-18.88-0.477-36.394 12.606-39.26 34.899v24.08c0.477 18.917 16.077 34.558 34.957 34.972l243.826-1.438c0.362 0.035 0.608 0.171 0.928 0.171l17.1 0.378c9.441 0.226 17.9-3.467 23.923-9.593 6.124-6.083 8.382-14.58 8.131-24.078l-1.821-17.138c0.001-0.335 1.27-0.562 1.27-0.945zM766.211 701.451l127.524-0.512c18.88 0.421 36.357-11.183 39.26-33.474v-24.077c-0.478-18.922-16.134-34.558-34.957-35.037l-240.702 1.458c-0.378 0-0.605-0.151-0.967-0.151l-17.062-0.42c-9.441-0.226-17.95 3.469-23.98 9.611-6.159 6.03-8.361 14.559-8.173 24.057l1.881 17.1c0.033 0.42-1.234 0.661-1.234 0.986l0.986 241.248c0.477 18.863 16.078 30.162 34.957 30.576l24.017 0.037c18.827 0.433 33.874-16.055 33.403-34.941l-1.062-130.388 168.117 166.502c18.276 18.314 47.809 18.314 66.085 0 18.255-18.31 18.255-47.906 0-66.218L766.209 701.442zM392.992 618.855c-6.028-6.14-14.541-9.834-23.923-9.61l-17.104 0.42c-0.346 0-0.566 0.151-0.948 0.151l-243.81-1.458c-18.881 0.478-34.503 16.112-34.956 35.034v24.078c2.843 22.292 20.357 33.892 39.206 33.474l129.158 0.42-167.983 166.37c-18.234 18.255-18.234 47.906 0 66.218 18.256 18.314 47.845 18.314 66.102 0l168.137-165.418-1.079 131.185c-0.42 18.922 14.579 35.413 33.424 34.938h25.406c18.937-0.477 34.54-11.713 34.956-30.637l0.987-243.05c0-0.346-1.267-0.571-1.267-0.949l1.821-17.104c0.206-9.495-1.993-18.025-8.116-24.053zM615.434 387.559c6.03 6.123 14.541 9.819 23.965 9.553l17.06-0.378c0.378 0 0.608-0.132 0.986-0.19l244.19 1.457c18.88-0.434 34.482-16.078 34.956-34.994l0.058-24.078c-2.898-22.331-20.439-35.355-39.26-34.939l-129.573-0.511 166.483-164.893c18.31-18.235 18.31-47.83 0.054-66.143-18.276-18.311-47.809-18.311-66.084 0L700.152 238.89l1.079-134.276c0.454-18.863-14.598-35.355-33.424-34.939H643.79c-18.881 0.477-34.484 11.773-34.957 30.637l-0.967 245.075c0 0.378 1.251 0.608 1.251 0.948l-1.859 17.138c-0.192 9.499 2.007 17.991 8.173 24.078z" p-id="85764"></path></svg>'}})}}(),P({target:V.current,height:o.style.height,toolbar:null===(t=o.toolbar)||void 0===t?void 0:t.join(" "),isFS:!1}),[2]}var n,r}))}))}),[]),P=(0,n.useCallback)((function(t){var e,n=t.selector,r=(t.height,t.isFS),a=t.target;!function(t){var e,n=t.selector,o=t.height,r=t.target,i=t.readonly,a=void 0!==i&&i,c=t.customIconsId,l=t.toolbar,u=t.setUp,d=t.initCB,s=S("tinyMCE");s&&s.init({selector:n,target:r,height:o,menubar:!1,branding:!1,statusbar:!1,icons:(null===(e=window.tinyMCE)||void 0===e?void 0:e.IconManager.has(c))?c:"",plugins:["table","uploadimage","link","paste","fullpage","customfullscreen","customfullscreenexit","nonbreaking","lists","wordcount"],toolbar:l,fontsize_formats:"12px 14px 16px 18px 20px 24px 36px 48px 56px 72px",fullpage_default_font_size:"12px",nonbreaking_force_tab:!0,skin:"oxide",theme:"silver",setup:u,init_instance_callback:function(t){d&&d(t)},readonly:a,content_style:a?"p {margin: 0px; border:0px ; padding: 0px;} .mce-content-readonly {margin: 0px;}":"p {margin: 0px; border:0px ; padding: 0px;}",placeholder:"请在此输入内容"})}({readonly:l,target:a,toolbar:null===(e=o.toolbar)||void 0===e?void 0:e.join(" "),selector:n,height:o.style.height,isFS:r,customIconsId:T,setUp:function(t){f.current||(f.current=function(t){var e=t.click,n=t.editor,o=window.tinyMCE.util.Tools.resolve("tinymce.PluginManager");function r(t){e("uploadimage")}function i(t){e("customfullscreen")}function a(t){e("customfullscreenexit")}return o.add("uploadimage",(function(t){})),o.add("customfullscreen",(function(t){})),o.add("customfullscreenexit",(function(t){})),o.add("uploadVideo",(function(){})),function(t){t.ui.registry.addButton("uploadimage",{icon:"image",tooltip:"上传图片",onAction:function(){r()}}),t.ui.registry.addMenuItem("uploadimage",{icon:"image",text:"上传图片",onAction:function(){r()}}),t.ui.registry.addButton("uploadVideo",{icon:"customvideo",tooltip:"上传视频",onAction:function(){e("uploadVideo")}}),t.ui.registry.addMenuItem("uploadVideo",{icon:"customvideo",tooltip:"上传视频",onAction:function(){e("uploadVideo")}}),t.ui.registry.addButton("customfullscreen",{icon:"fullscreen",tooltip:"展开",onAction:function(){i()}}),t.ui.registry.addMenuItem("customfullscreen",{icon:"fullscreen",text:"展开",onAction:function(){i()}}),t.ui.registry.addButton("customfullscreenexit",{icon:"fullscreenexit",tooltip:"收起",onAction:function(){a()}}),t.ui.registry.addMenuItem("customfullscreenexit",{icon:"fullscreenexit",text:"收起",onAction:function(){a()}})}(n),{setUrl:function(t){if(n){var e=n.dom,o=t.type,r=t.url;"image"===o&&n.insertContent(e.createHTML("img",{src:r})),"video"===o&&n.insertContent(e.createHTML("video",{src:r,controls:!0}))}}}}({click:function(t){switch(t){case"uploadimage":m(!0),E({title:"上传图片",type:"image",url:""});break;case"uploadVideo":m(!0),E({title:"上传视频",type:"video",url:""});break;case"customfullscreen":x(!0);break;case"customfullscreenexit":x(!1)}},editor:t})),t.on("blur",(function(){F(!1)}))},initCB:function(t){i.dataSource((function(e){t.setContent(e),s.current=e})),t.setContent(s.current),b&&setTimeout((function(){y(!1)}),50)}})}),[]),F=(0,n.useCallback)((function(t){var e=S("tinyMCE");if(e){var n=g||t?e.editors[d]:e.editors[u],o=null==n?void 0:n.getContent({format:"t"});s.current=o.trim()||"",r.done(s.current),r.onChange(s.current)}}),[]);(0,n.useEffect)((function(){return L(),function(){var t=S("tinyMCE");t&&[u,d].forEach((function(e){var n;null===(n=t.editors[e])||void 0===n||n.remove()}))}}),[o.toolbar.join(" "),o.style]),(0,n.useEffect)((function(){if(l){var t=a.runtime&&!a.runtime.debug?document:document.querySelector("iframe").contentDocument,e=null==t?void 0:t.getElementById("p".concat(u)),n=null==e?void 0:e.querySelector("iframe"),o=null==e?void 0:e.querySelector(".tox-editor-container");n&&o&&(o.style.height=n.contentDocument.documentElement.offsetHeight+"px")}}),[l]);var H=(0,n.useMemo)((function(){return n.default.createElement(c.Spin,{spinning:b,tip:"编辑器加载中..."},n.default.createElement("textarea",{ref:V,id:u,hidden:!b,readOnly:!0}))}),[b]),R=(0,n.useCallback)((function(){m(!1),E({})}),[]),U=(0,n.useCallback)((function(t){E((function(e){return B(B({},e),t)}))}),[]),q=(0,n.useCallback)((function(){var t;R(),null===(t=f.current)||void 0===t||t.setUrl(k)}),[k]),D=(0,n.useMemo)((function(){return n.default.createElement(C,{onChange:U,onOk:q,update:F,uploadModel:k,onClose:R,visible:h})}),[h,k]),G=(0,n.useMemo)((function(){return g?n.default.createElement("div",null,n.default.createElement("textarea",{ref:function(t){var e=S("tinyMCE");e&&(e.editors[d]||P({target:t,height:o.style.height,toolbar:o.toolbar.join(" "),isFS:!0}))},id:d,hidden:!0,readOnly:!0})):null}),[g]);return n.default.createElement("div",{className:"".concat(w["editor-rich-text"]," ").concat(l?w["editor-rich-text__readonly"]:""),style:o.style,id:"p".concat(u)},H,D,G)}function L(t){var e=t.env,o=t.data,r=t.inputs,i=t.outputs,a=(0,n.useMemo)((function(){return n.default.createElement(V,{readonly:!1,data:o,outputs:i,inputs:r,env:e})}),[]);return o.displayEditbar?a:(o.toolbar=[],n.default.createElement(V,{readonly:!1,data:o,outputs:i,inputs:r,env:e}))}})();var a=i.A;export{a as default};