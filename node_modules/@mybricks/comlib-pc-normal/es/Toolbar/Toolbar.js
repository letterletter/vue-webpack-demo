import*as e from"react";import*as t from"antd";import*as n from"@ant-design/icons";var a={4988:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",a=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),a&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),a&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,a,i,o){"string"==typeof e&&(e=[[null,e,void 0]]);var l={};if(a)for(var r=0;r<this.length;r++){var c=this[r][0];null!=c&&(l[c]=!0)}for(var u=0;u<e.length;u++){var s=[].concat(e[u]);a&&l[s[0]]||(void 0!==o&&(void 0===s[5]||(s[1]="@layer".concat(s[5].length>0?" ".concat(s[5]):""," {").concat(s[1],"}")),s[5]=o),n&&(s[2]?(s[1]="@media ".concat(s[2]," {").concat(s[1],"}"),s[2]=n):s[2]=n),i&&(s[4]?(s[1]="@supports (".concat(s[4],") {").concat(s[1],"}"),s[4]=i):s[4]="".concat(i)),t.push(s))}},t}},8371:e=>{e.exports=function(e){return e[1]}},9313:(e,t,n)=>{n.d(t,{A:()=>r});var a=n(8371),i=n.n(a),o=n(4988),l=n.n(o)()(i());l.push([e.id,".toolbar-e8281 {\n  display: flex;\n  align-items: center;\n  flex-direction: row;\n  flex-flow: row wrap;\n}\n.ellipsisIcon-d4cc3 {\n  cursor: pointer;\n  padding: 2px 8px;\n  color: blue;\n}\n.suggestion-c8414 {\n  font-style: italic;\n  padding: 5px;\n  color: #aaa;\n}\n.button-c5a7e {\n  width: auto;\n}\n.button-c5a7e .ant-btn {\n  height: 100%;\n}\n.space-d39ff .ant-space-item {\n  display: flex;\n  /*实现垂直居中*/\n  align-items: center;\n  /*实现水平居中*/\n  justify-content: center;\n}\n.mobileToolbar-ea8ee > div {\n  width: 100% !important;\n}\n.emptyWrap-a01b7 {\n  width: auto;\n}\n",""]),l.locals={toolbar:"toolbar-e8281",ellipsisIcon:"ellipsisIcon-d4cc3",suggestion:"suggestion-c8414",button:"button-c5a7e",space:"space-d39ff",mobileToolbar:"mobileToolbar-ea8ee",emptyWrap:"emptyWrap-a01b7"};const r=l},5072:e=>{var t=[];function n(e){for(var n=-1,a=0;a<t.length;a++)if(t[a].identifier===e){n=a;break}return n}function a(e,a){for(var o={},l=[],r=0;r<e.length;r++){var c=e[r],u=a.base?c[0]+a.base:c[0],s=o[u]||0,d="".concat(u," ").concat(s);o[u]=s+1;var f=n(d),p={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==f)t[f].references++,t[f].updater(p);else{var v=i(p,a);a.byIndex=r,t.splice(r,0,{identifier:d,updater:v,references:1})}l.push(d)}return l}function i(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var o=a(e=e||[],i=i||{});return function(e){e=e||[];for(var l=0;l<o.length;l++){var r=n(o[l]);t[r].references--}for(var c=a(e,i),u=0;u<o.length;u++){var s=n(o[u]);0===t[s].references&&(t[s].updater(),t.splice(s,1))}o=c}}},7659:e=>{var t={};e.exports=function(e,n){var a=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(n)}},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},4868:e=>{e.exports=function(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}},7825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var a="";n.supports&&(a+="@supports (".concat(n.supports,") {")),n.media&&(a+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(a+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),a+=n.css,i&&(a+="}"),n.media&&(a+="}"),n.supports&&(a+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(a,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},1113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},i={};function o(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={id:e,exports:{}};return a[e](n,n.exports,o),n.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var l={};(()=>{o.d(l,{A:()=>B});const a=(i={default:()=>e.default,useCallback:()=>e.useCallback,useEffect:()=>e.useEffect,useRef:()=>e.useRef},r={},o.d(r,i),r);var i,r;const c=(e=>{var t={};return o.d(t,e),t})({Button:()=>t.Button,Dropdown:()=>t.Dropdown,Image:()=>t.Image,Menu:()=>t.Menu,Space:()=>t.Space}),u=n;var s,d,f,p,v,m;!function(e){e.FRONT="front",e.BACK="back"}(s||(s={})),function(e){e.Unset="unset",e.FlexStart="flex-start",e.Center="center",e.FlexEnd="flex-end"}(d||(d={})),function(e){e.Large="large",e.Middle="middle",e.Small="small"}(f||(f={})),function(e){e.Default="default",e.Circle="circle",e.Round="round"}(p||(p={})),function(e){e.Default="default",e.Primary="primary",e.Ghost="ghost",e.Dashed="dashed",e.Link="link",e.Text="text",e.Danger="danger",e.ALink="a"}(v||(v={}));var y=((m={})[f.Small]="24px",m[f.Middle]="32px",m[f.Large]="40px",o(5072)),h=o.n(y),b=o(7825),g=o.n(b),k=o(7659),x=o.n(k),E=o(4868),L=o.n(E),S=o(540),T=o.n(S),C=o(1113),w=o.n(C),D=o(9313),_={attributes:{title:"less"}};_.styleTagTransform=w(),_.setAttributes=L(),_.insert=x().bind(null,"head"),_.domAPI=g(),_.insertStyleElement=T(),h()(D.A,_);const N=D.A&&D.A.locals?D.A.locals:void 0;var A=function(e,t){var n,a;if(!e)return{type:"none"};if(!t.runtime||!(null==e?void 0:e.id))return{type:"none"};var i=null===(n=null==t?void 0:t.hasPermission(null==e?void 0:e.id))||void 0===n||n;if(!0===i)return{type:"none"};var o=function(){var t,n;return!1===i?{permission:!1,type:null===(t=e.registerData)||void 0===t?void 0:t.noPrivilege,hintLinkUrl:e.hintLink,hintLinkTitle:null===(n=e.registerData)||void 0===n?void 0:n.title}:i}();return o.permission?{type:"none"}:"hide"===o.type?{type:"hide"}:"hintLink"===o.type?{type:"hintLink",hintLinkUrl:o.hintLinkUrl||e.hintLink,hintLinkTitle:o.hintLinkTitle||(null===(a=e.registerData)||void 0===a?void 0:a.title)}:{type:"hide"}},I=function(){return I=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},I.apply(this,arguments)};const B=function(e){var t,n,i=e.env,o=e.data,l=e.inputs,r=e.outputs,d=e.slots,f=(0,a.useRef)(null),p=function(e){var t;return"mobile"===(null===(t=null==e?void 0:e.canvas)||void 0===t?void 0:t.type)}(i);(0,a.useEffect)((function(){i.runtime&&(o.btnList||[]).forEach((function(e){var t,n,a,i,o,r,c,u,s=e.key,d=f.current.querySelector('div[data-btn-key="'.concat(s,'"]'));e.hidden?(null==d?void 0:d.style)&&(d.style.display="none"):(null==d?void 0:d.style)&&(d.style.display="block"),null===(t=l["".concat("setBtnText","_").concat(s)])||void 0===t||t.call(l,(function(t,n){t&&"string"==typeof t&&(e.text=t,n["".concat("setBtnTextDone","_").concat(s)](t))})),null===(n=l["".concat("setDisable","_").concat(s)])||void 0===n||n.call(l,(function(t,n){e.disabled=!0,n["".concat("setDisableDone","_").concat(s)]()})),null===(a=l["".concat("setEnable","_").concat(s)])||void 0===a||a.call(l,(function(t,n){e.disabled=!1,n["".concat("setEnableDone","_").concat(s)]()})),null===(i=l["".concat("setHidden","_").concat(s)])||void 0===i||i.call(l,(function(t,n){(null==d?void 0:d.style)&&(d.style.display="none"),e.hidden=!0,n["".concat("setHiddenDone","_").concat(s)]()})),null===(o=l["".concat("setVisible","_").concat(s)])||void 0===o||o.call(l,(function(t,n){(null==d?void 0:d.style)&&(d.style.display="block"),e.hidden=!1,n["".concat("setVisibleDone","_").concat(s)]()})),null===(r=l["".concat("setBtnOpenLoading","_").concat(s)])||void 0===r||r.call(l,(function(t,n){e.loading=!0,n["".concat("setBtnOpenLoadingDone","_").concat(s)]()})),null===(c=l["".concat("setBtnCloseLoading","_").concat(s)])||void 0===c||c.call(l,(function(t,n){e.loading=!1,n["".concat("setBtnCloseLoadingDone","_").concat(s)]()})),null===(u=l["".concat("SetBtnStyle","_").concat(s)])||void 0===u||u.call(l,(function(t,n){e.style=I(I({},e.style||{}),t||{}),n["".concat("SetBtnStyle","_").concat(s)](t)}))}))}),[]),(0,a.useEffect)((function(){i.runtime&&(o.btnList||[]).forEach((function(e){var t=e.key;l[t]((function(t){e.inVal=t}))}))}));var v=function(e){if(i.runtime){var t="external"===e.dataType?e.inVal:e.outVal;r[e.key](t)}},m=(0,a.useCallback)((function(e){if(i.runtime){var t="external"===e.dataType?e.inVal:e.outVal;r["".concat("doubleClick","_").concat(e.key)](t)}}),[]),y=(o.btnList||[]).filter((function(e){return!(e.permission&&"hide"===A(e.permission,i).type)})).reduce((function(e,t){var n,a;return i.runtime&&o.useEllipses&&o.maxShowNumber?(e.btnCount<o.maxShowNumber&&(null===(a=null===(n=e.btnList)||void 0===n?void 0:n.push)||void 0===a||a.call(n,t)),(null==t?void 0:t.hidden)||e.btnCount++,e):(e.btnList.push(t),e)}),{btnList:[],btnCount:0}).btnList,h=(o.btnList||[]).filter((function(e){return!(e.permission&&"hide"===A(e.permission,i).type||(null==e?void 0:e.hidden)&&i.runtime)})).filter((function(e,t){return!!(i.runtime&&o.useEllipses&&o.maxShowNumber)&&t>=o.maxShowNumber}));return a.default.createElement("div",{ref:f,className:"mybricks-toolbar ".concat(N.toolbar," ").concat(p?N.mobileToolbar:""),style:{justifyContent:o.layout,gap:p?"8px 4px":"".concat(null===(t=o.spaceSize)||void 0===t?void 0:t[1],"px ").concat(null===(n=o.spaceSize)||void 0===n?void 0:n[0],"px"),height:"100%"}},(o.btnList||[]).length>0||i.runtime?a.default.createElement(a.default.Fragment,null,function(e){if(!e.length)return null;var t=o.allShape,n=o.allSize,l=o.allType,r=o.allDanger;return e.map((function(e){var o=e.permission&&A(e.permission,i);if("hide"!==(null==o?void 0:o.type)){var f=e.type,p=e.danger,y=e.size,h=e.shape,b=e.disabled,g=(e.isCustom,e.loading),k=e.isSlot,x=e.key,E=e.style;return"hintLink"===(null==o?void 0:o.type)?a.default.createElement("a",{href:o.hintLinkUrl,target:"_blank",style:{textDecoration:"underline"}},o.hintLinkTitle||"无权限"):k?a.default.createElement("div",{className:N.emptyWrap,"data-slot-idx":e.key,"data-btn-key":e.key},(null==d?void 0:d[x])&&(null==d?void 0:d[x].render({key:x}))):a.default.createElement("div",{key:x,className:N.button,"data-btn-idx":e.key,"data-btn-key":e.key},a.default.createElement(c.Button,{type:f||l,danger:void 0!==p?p:r,size:y||n,shape:h||t,disabled:b,onClick:function(){return v(e)},onDoubleClick:function(){return m(e)},loading:g,block:!0,style:E||{}},function(e){var t,n=e.useIcon,i=e.icon,o=e.iconLocation,l=e.iconDistance,r=e.text,d=e.showText,f=e.src,p=e.contentSize,v=e.isCustom,m=u&&(null===(t=u[i])||void 0===t?void 0:t.render()),y=a.default.createElement("span",{style:{fontSize:p[0]}},m),h=a.default.createElement(c.Image,{width:p[1],height:p[0],src:f,preview:!1,alt:" "});return a.default.createElement(c.Space,{size:l,className:N.space},n&&o===s.FRONT?v?f?h:null:y:null,!n||d?a.default.createElement("span",null,r):null,n&&o===s.BACK?v?f?h:null:y:null)}(I(I({},e),{text:i.i18n(e.text)}))))}}))}(y),function(e){if(!e.length)return null;var t=a.default.createElement(c.Menu,null,e.map((function(e){var t=e.permission&&A(e.permission,i);return t&&"hintLink"===t.type?a.default.createElement("a",{href:t.hintLinkUrl,target:"_blank",style:{textDecoration:"underline"}},t.hintLinkTitle||"无权限"):a.default.createElement(c.Menu.Item,{key:e.key,disabled:e.disabled,onClick:function(){return v(e)}},e.isSlot?(null==d?void 0:d[e.key])&&(null==d?void 0:d[e.key].render({key:e.key})):function(e){var t,n=e.useIcon,i=e.icon,o=e.iconLocation,l=e.iconDistance,r=e.text,d=e.showText,f=e.contentSize,p=u&&(null===(t=u[i])||void 0===t?void 0:t.render()),v=a.default.createElement("span",{style:{fontSize:f[0]}},p);return a.default.createElement(c.Space,{size:l},n&&p&&o===s.FRONT?v:null,!n||d?a.default.createElement("span",null,r):null,n&&p&&o===s.BACK?v:null)}(e))})));return a.default.createElement(c.Dropdown,{overlay:t,placement:"bottomRight"},a.default.createElement("div",{className:N.ellipsisIcon},a.default.createElement(u.EllipsisOutlined,null)))}(h)):a.default.createElement("div",{className:N.suggestion},'在编辑栏中点击"添加按钮"'))}})();var r=l.A;export{r as default};